<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Nstd</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.aha-nstd.com/"/>
  <updated>2017-03-08T08:07:44.000Z</updated>
  <id>http://blog.aha-nstd.com/</id>
  
  <author>
    <name>Nstd</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>搭建一个本地jFrog Artifactory并上传库文件</title>
    <link href="http://blog.aha-nstd.com/2017/03/08/set-up-a-local-jfrog-artifactory/"/>
    <id>http://blog.aha-nstd.com/2017/03/08/set-up-a-local-jfrog-artifactory/</id>
    <published>2017-03-08T02:38:12.000Z</published>
    <updated>2017-03-08T08:07:44.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前情提要&quot;&gt;&lt;a href=&quot;#前情提要&quot; class=&quot;headerlink&quot; title=&quot;前情提要&quot;&gt;&lt;/a&gt;前情提要&lt;/h1&gt;&lt;p&gt;前段时间，公司想搞hybrid开发，老司机觉得web里的url跳转挺方便的，稍稍调研了下，就自己撸了一个AndroidRouter库。&lt;br&gt;差不多市面上该有的功能都有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;根据URL跳转到Activity&lt;/li&gt;
&lt;li&gt;通过Helper跳转到Activity&lt;/li&gt;
&lt;li&gt;同一个Activity可以映射多个URL&lt;/li&gt;
&lt;li&gt;跳转Activity的时候可以通过URL参数将变量的值注入到Activity中（支持基本类型和实现序列化接口的类）&lt;/li&gt;
&lt;li&gt;通过H5打开Native页面&lt;/li&gt;
&lt;li&gt;统一解决savedInstanceState的注入与读取&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;用着也还挺舒服的，他就想推广到其他项目里，但是每个工程重新拷贝一份Library代码，对代码管理和版本管理什么的都不太方便，于是就有了今天这出：&lt;br&gt;搭建一个本地的maven仓库，用gradle的compile进行引用，再方便不过了。&lt;br&gt;在网上看的时候，都说jFrog Artifactory比较好用，就随大流啦。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;本文使用环境&quot;&gt;&lt;a href=&quot;#本文使用环境&quot; class=&quot;headerlink&quot; title=&quot;本文使用环境&quot;&gt;&lt;/a&gt;本文使用环境&lt;/h1&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;item&lt;/th&gt;
&lt;th&gt;info&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;系统&lt;/td&gt;
&lt;td&gt;osx 10.11.6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;artifactory版本&lt;/td&gt;
&lt;td&gt;5.1.0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&quot;安装-amp-配置&quot;&gt;&lt;a href=&quot;#安装-amp-配置&quot; class=&quot;headerlink&quot; title=&quot;安装 &amp;amp; 配置&quot;&gt;&lt;/a&gt;安装 &amp;amp; 配置&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://www.jfrog.com/open-source/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官网&lt;/a&gt;有两种方式进行安装：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;下载安装包（安装包里有各个平台的安装文件）&lt;/li&gt;
&lt;li&gt;用docker&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;因为对docker不是很熟，而且安装包安装方式听说也挺简单的，就着最简原则，就用第一种方式安装了。&lt;/p&gt;
&lt;h2 id=&quot;预安装&quot;&gt;&lt;a href=&quot;#预安装&quot; class=&quot;headerlink&quot; title=&quot;预安装&quot;&gt;&lt;/a&gt;预安装&lt;/h2&gt;&lt;p&gt;jFrog Artifactory得用java8（自带的tomcat需要），如果没有安装或者安装了多个版本的java需要进行切换(mac下可以用jenv)，请自行解决:)&lt;/p&gt;
&lt;h2 id=&quot;安装jFrog-Artifactory&quot;&gt;&lt;a href=&quot;#安装jFrog-Artifactory&quot; class=&quot;headerlink&quot; title=&quot;安装jFrog Artifactory&quot;&gt;&lt;/a&gt;安装jFrog Artifactory&lt;/h2&gt;&lt;p&gt;从&lt;a href=&quot;https://www.jfrog.com/open-source/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;下载zip包，解压并进入bin文件夹，执行对应的安装程序：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mac/linux: &lt;code&gt;artifactory.sh&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;windows: &lt;code&gt;artifactory.bat&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;安装过程挺快的，完成以后，浏览器里输入：&lt;code&gt;http://localhost:8081/artifactory&lt;/code&gt;&lt;br&gt;首先会让你设置admin等信息，然后就可以用了&lt;br&gt;我默认创建了一个gradle repository，生成了4个子Repository：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;gradle-dev&lt;/li&gt;
&lt;li&gt;gradle-release&lt;/li&gt;
&lt;li&gt;gradle-dev-local&lt;/li&gt;
&lt;li&gt;gradle-release-local (&lt;strong&gt;我们内部库默认上传到这里&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;直到这里都还挺顺利的，随后就要入一个自己挖的大坑了！&lt;/p&gt;
&lt;h1 id=&quot;library中配置上传信息&quot;&gt;&lt;a href=&quot;#library中配置上传信息&quot; class=&quot;headerlink&quot; title=&quot;library中配置上传信息&quot;&gt;&lt;/a&gt;library中配置上传信息&lt;/h1&gt;&lt;h2 id=&quot;项目构成&quot;&gt;&lt;a href=&quot;#项目构成&quot; class=&quot;headerlink&quot; title=&quot;项目构成&quot;&gt;&lt;/a&gt;项目构成&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;android_router     //workspace&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    app            //测试工程&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    annotation-lib //通用注解部分，它被其他3部分所引用&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    api-lib        //Router and Helper，被app引用&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    compiler-lib   //生成帮助类的apt库，被app引用&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;p&gt;一开始是按&lt;a href=&quot;http://www.voidcn.com/blog/zzulp/article/p-5979375.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这篇教程&lt;/a&gt;配置的&lt;br&gt;虽然能正常生成和上传，但是因为有依赖工程（annotation-lib），引用的时候报错：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;android_router:annotation-lib:unspecified&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;试了半天，怀疑是&lt;code&gt;api-lib&lt;/code&gt;和&lt;code&gt;compiler-lib&lt;/code&gt;中引用的&lt;code&gt;annotation-lib&lt;/code&gt;库是以project的形式引用，而不是以jar方式&lt;br&gt;于是就想能不能把pom.xml中的依赖重写一下，google一下还真有，所以就有了以下的配置。&lt;/p&gt;
&lt;h3 id=&quot;修改android-router下的build-gradle&quot;&gt;&lt;a href=&quot;#修改android-router下的build-gradle&quot; class=&quot;headerlink&quot; title=&quot;修改android_router下的build.gradle&quot;&gt;&lt;/a&gt;修改&lt;code&gt;android_router&lt;/code&gt;下的&lt;code&gt;build.gradle&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;添加本地仓库&lt;br&gt;&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;buildscript&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;classpath&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;org.jfrog.buildinfo:build-info-extractor-gradle:3.1.1&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;allprojects&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;repositories&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        maven &amp;#123; url &lt;span class=&quot;string&quot;&gt;&quot;http://server_address:8081/artifactory/gradle-release-local&quot;&lt;/span&gt; &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;修改annotation-lib下的build-gradle&quot;&gt;&lt;a href=&quot;#修改annotation-lib下的build-gradle&quot; class=&quot;headerlink&quot; title=&quot;修改annotation-lib下的build.gradle&quot;&gt;&lt;/a&gt;修改&lt;code&gt;annotation-lib&lt;/code&gt;下的&lt;code&gt;build.gradle&lt;/code&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;apply plugin: &lt;span class=&quot;string&quot;&gt;&#39;com.jfrog.artifactory&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;apply plugin: &lt;span class=&quot;string&quot;&gt;&#39;maven-publish&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; MAVEN_LOCAL_PATH =&lt;span class=&quot;string&quot;&gt;&#39;http://server_address:8081/artifactory&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; ARTIFACT_ID = &lt;span class=&quot;string&quot;&gt;&#39;annotation&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; VERSION_NAME = &lt;span class=&quot;string&quot;&gt;&#39;1.0.0&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; GROUP_ID = &lt;span class=&quot;string&quot;&gt;&#39;com.router&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;publishing &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    publications &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        aar(MavenPublication) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            groupId GROUP_ID&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            version = VERSION_NAME&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            artifactId ARTIFACT_ID&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//----- !!!为了别的项目能读到当前的配置!!! -----&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;project&lt;/span&gt;.ext.&lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; = GROUP_ID&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;project&lt;/span&gt;.ext.version = VERSION_NAME&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;project&lt;/span&gt;.ext.artifactId = ARTIFACT_ID&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Tell maven to prepare the generated &quot;*.aar&quot; file for publishing&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            artifact(&lt;span class=&quot;string&quot;&gt;&quot;$buildDir/libs/$&amp;#123;project.getName()&amp;#125;.jar&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            pom.withXml &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt; = asNode().appendNode(&lt;span class=&quot;string&quot;&gt;&#39;dependencies&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;configurations&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;compile&lt;/span&gt;.allDependencies.&lt;span class=&quot;keyword&quot;&gt;each&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;comment&quot;&gt;// 如果有compile fileTree()，group会为空，需要去除&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(it.&lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; dependency = &lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt;.appendNode(&lt;span class=&quot;string&quot;&gt;&#39;dependency&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        dependency.appendNode(&lt;span class=&quot;string&quot;&gt;&#39;groupId&#39;&lt;/span&gt;, it.&lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        dependency.appendNode(&lt;span class=&quot;string&quot;&gt;&#39;artifactId&#39;&lt;/span&gt;, it.name)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        dependency.appendNode(&lt;span class=&quot;string&quot;&gt;&#39;version&#39;&lt;/span&gt;, it.version)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;artifactory &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    contextUrl = MAVEN_LOCAL_PATH&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    publish &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        repository &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// The Artifactory repository key to publish to&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            repoKey = &lt;span class=&quot;string&quot;&gt;&#39;gradle-release-local&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            username = artifactory_username&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            password = artifactory_password&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        defaults &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Tell the Artifactory Plugin which artifacts should be published to Artifactory.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            publications(&lt;span class=&quot;string&quot;&gt;&#39;aar&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            publishArtifacts = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Properties to be attached to the published artifacts.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            properties = [&lt;span class=&quot;string&quot;&gt;&#39;qa.level&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;basic&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;dev.team&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;core&#39;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Publish generated POM files to Artifactory (true by default)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            publishPom = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;说明&lt;/strong&gt;&lt;br&gt;&lt;code&gt;artifactory_username&lt;/code&gt;和&lt;code&gt;artifactory_password&lt;/code&gt;定义在gradle.properties中，下同&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;修改api-lib下的build-gradle&quot;&gt;&lt;a href=&quot;#修改api-lib下的build-gradle&quot; class=&quot;headerlink&quot; title=&quot;修改api-lib下的build.gradle&quot;&gt;&lt;/a&gt;修改&lt;code&gt;api-lib&lt;/code&gt;下的&lt;code&gt;build.gradle&lt;/code&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;63&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;65&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;67&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;68&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;69&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;70&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;71&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;72&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;73&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;74&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;75&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;76&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;77&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;apply plugin: &lt;span class=&quot;string&quot;&gt;&#39;com.jfrog.artifactory&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;apply plugin: &lt;span class=&quot;string&quot;&gt;&#39;maven-publish&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; MAVEN_LOCAL_PATH =&lt;span class=&quot;string&quot;&gt;&#39;http://server_address:8081/artifactory&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; ARTIFACT_ID = &lt;span class=&quot;string&quot;&gt;&#39;api&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; VERSION_NAME = &lt;span class=&quot;string&quot;&gt;&#39;1.0.0&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; GROUP_ID = &lt;span class=&quot;string&quot;&gt;&#39;com.router&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;publishing &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    publications &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        aar(MavenPublication) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            groupId GROUP_ID&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            version = VERSION_NAME&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            artifactId ARTIFACT_ID&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Tell maven to prepare the generated &quot;*.aar&quot; file for publishing&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            artifact(&lt;span class=&quot;string&quot;&gt;&quot;$buildDir/outputs/aar/$&amp;#123;project.getName()&amp;#125;-release.aar&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            pom.withXml &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt; = asNode().appendNode(&lt;span class=&quot;string&quot;&gt;&#39;dependencies&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;configurations&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;compile&lt;/span&gt;.allDependencies.&lt;span class=&quot;keyword&quot;&gt;each&lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; depGroup = it.&lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; depName = it.name&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; depVersion = it.version&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;comment&quot;&gt;//如果当前库是annotation-lib，重写依赖&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(it.name == &lt;span class=&quot;string&quot;&gt;&quot;annotation-lib&quot;&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (proj in &lt;span class=&quot;keyword&quot;&gt;project&lt;/span&gt;.parent.&lt;span class=&quot;keyword&quot;&gt;subprojects&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(proj.name == &lt;span class=&quot;string&quot;&gt;&quot;annotation-lib&quot;&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                                &lt;span class=&quot;comment&quot;&gt;//这些信息是在annotation-lib的build.gradle中定义的&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                                depGroup = proj.ext.&lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                                depName = proj.ext.artifactId&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                                depVersion = proj.ext.version&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(it.&lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; dependency = &lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt;.appendNode(&lt;span class=&quot;string&quot;&gt;&#39;dependency&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        dependency.appendNode(&lt;span class=&quot;string&quot;&gt;&#39;groupId&#39;&lt;/span&gt;, depGroup)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        dependency.appendNode(&lt;span class=&quot;string&quot;&gt;&#39;artifactId&#39;&lt;/span&gt;, depName)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        dependency.appendNode(&lt;span class=&quot;string&quot;&gt;&#39;version&#39;&lt;/span&gt;, depVersion)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;artifactory &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    contextUrl = MAVEN_LOCAL_PATH&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    publish &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        repository &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// The Artifactory repository key to publish to&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            repoKey = &lt;span class=&quot;string&quot;&gt;&#39;gradle-release-local&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            username = artifactory_username&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            password = artifactory_password&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        defaults &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Tell the Artifactory Plugin which artifacts should be published to Artifactory.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            publications(&lt;span class=&quot;string&quot;&gt;&#39;aar&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            publishArtifacts = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Properties to be attached to the published artifacts.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            properties = [&lt;span class=&quot;string&quot;&gt;&#39;qa.level&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;basic&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;dev.team&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;core&#39;&lt;/span&gt;]&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Publish generated POM files to Artifactory (true by default)&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            publishPom = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;compile&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;fileTree&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;*.jar&#39;&lt;/span&gt;], dir: &lt;span class=&quot;string&quot;&gt;&#39;libs&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;compile&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;com.android.support:appcompat-v7:22.2.1&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;compile&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;project&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;:annotation-lib&#39;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;compiler-lib的&lt;code&gt;build.gradle&lt;/code&gt;配置同上&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;实测&quot;&gt;&lt;a href=&quot;#实测&quot; class=&quot;headerlink&quot; title=&quot;实测&quot;&gt;&lt;/a&gt;实测&lt;/h3&gt;&lt;p&gt;配置好以后，怀着激动的心情敲下如下代码：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;./gradlew clean assembleRelease&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;./gradlew artifactoryPublish&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;编译上传都成功！！！(≧▽≦)/&lt;/p&gt;
&lt;p&gt;然后放到其他项目里一试…..一…..试……😱，什么鬼…还是那个错：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;android_router:annotation-lib:unspecified&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;尝试了小半个下午都没解决（有时候想不通的时候，真该停下来，也许反而能增加不少效率！）&lt;br&gt;第二天突然开窍，会不会是缓存的问题（AndroidStudio的dataBinding抽风的时候clean再重启就好了），试了下，更改了一下上传的lib版本号，果然可以了！&lt;/p&gt;
&lt;h1 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;做事的时候能静下心好好做了，但是思维漏洞有时候还是难以填补，需要更多的经验。&lt;/p&gt;
&lt;h1 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.jenv.be/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jEnv官网&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://boxingp.github.io/blog/2015/01/25/manage-multiple-versions-of-java-on-os-x/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在OS X中使用jEnv管理多个Java版本&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/hehonghui/android-tech-frontier/blob/master/issue-26/30%E5%88%86%E9%92%9F%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAandroid%E7%9A%84%E7%A7%81%E6%9C%89Maven%E4%BB%93%E5%BA%93.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;30分钟搭建一个android的私有Maven仓库&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/JeroenMols/ArtifactoryExample/blob/master/AwesomeAdvancedLibrary/awesomeadvancedlibrary/build.gradle&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ArtifactoryExample&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/32998716/maven-publish-cannot-not-apply-withxml-on-pom-file-no-signature-of-method&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Maven-publish cannot not apply withXML on pom file (No signature of method)&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project.properties&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gradle Prject Properties&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;PS&quot;&gt;&lt;a href=&quot;#PS&quot; class=&quot;headerlink&quot; title=&quot;PS&quot;&gt;&lt;/a&gt;PS&lt;/h1&gt;&lt;p&gt;今天妇女节，下午所有女生放假，啥时候也给男生放一个啊&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前情提要&quot;&gt;&lt;a href=&quot;#前情提要&quot; class=&quot;headerlink&quot; title=&quot;前情提要&quot;&gt;&lt;/a&gt;前情提要&lt;/h1&gt;&lt;p&gt;前段时间，公司想搞hybrid开发，老司机觉得web里的url跳转挺方便的，稍稍调研了下，就自己撸了一个AndroidRouter库。&lt;br&gt;差不多市面上该有的功能都有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;根据URL跳转到Activity&lt;/li&gt;
&lt;li&gt;通过Helper跳转到Activity&lt;/li&gt;
&lt;li&gt;同一个Activity可以映射多个URL&lt;/li&gt;
&lt;li&gt;跳转Activity的时候可以通过URL参数将变量的值注入到Activity中（支持基本类型和实现序列化接口的类）&lt;/li&gt;
&lt;li&gt;通过H5打开Native页面&lt;/li&gt;
&lt;li&gt;统一解决savedInstanceState的注入与读取&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;用着也还挺舒服的，他就想推广到其他项目里，但是每个工程重新拷贝一份Library代码，对代码管理和版本管理什么的都不太方便，于是就有了今天这出：&lt;br&gt;搭建一个本地的maven仓库，用gradle的compile进行引用，再方便不过了。&lt;br&gt;在网上看的时候，都说jFrog Artifactory比较好用，就随大流啦。&lt;/p&gt;
    
    </summary>
    
      <category term="配置" scheme="http://blog.aha-nstd.com/categories/%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="配置" scheme="http://blog.aha-nstd.com/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="gradle" scheme="http://blog.aha-nstd.com/tags/gradle/"/>
    
      <category term="jFrog" scheme="http://blog.aha-nstd.com/tags/jFrog/"/>
    
      <category term="Artifactory" scheme="http://blog.aha-nstd.com/tags/Artifactory/"/>
    
  </entry>
  
  <entry>
    <title>common-lang3.4 简摘</title>
    <link href="http://blog.aha-nstd.com/2017/03/03/common-lang3-package/"/>
    <id>http://blog.aha-nstd.com/2017/03/03/common-lang3-package/</id>
    <published>2017-03-03T09:45:35.000Z</published>
    <updated>2017-03-06T02:31:01.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;ArraysUtils&quot;&gt;&lt;a href=&quot;#ArraysUtils&quot; class=&quot;headerlink&quot; title=&quot;ArraysUtils:&quot;&gt;&lt;/a&gt;ArraysUtils:&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//这个类的很多方法都有做数组为空的判断&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//数组转字符串，便于打印日志&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Object array)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//数组转Map，Entry数组或者n行2列的数组才行&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Map&amp;lt;Object, Object&amp;gt; &lt;span class=&quot;title&quot;&gt;toMap&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Object[] array)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//如果数组为null，返回一个空数组，否则返回本身&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; ..[] nullToEmpty(..[] array);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//取数组的一个前闭后开的区间&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; ..[] subarray(..[] array, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; startIndexInclusive, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; endIndexExclusive);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//数组是否等长，一个为null，一个为空也算等长&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isSameLength&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(..[] array1, ..[] array2)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//包装类型和原始类型互换&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] toPrimitive(Integer[] array);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] toPrimitive(Integer[] array, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; valueForNull);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//原始类型和包装类型互换&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Integer[] toObject(in[] array);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//返回array1和array2合并后的结果，并不改变原始数组&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; T[] addAll(T[] array1, T.. array2);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;array强转成object，然后通过getClass().getComponentType()可以获取到数组的实际类型，可以由此做些统一的逻辑处理&lt;/li&gt;
&lt;/ul&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;StringUtils&quot;&gt;&lt;a href=&quot;#StringUtils&quot; class=&quot;headerlink&quot; title=&quot;StringUtils:&quot;&gt;&lt;/a&gt;StringUtils:&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;63&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;65&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;67&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;68&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;69&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;70&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;71&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;72&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;73&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;74&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;75&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;76&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;77&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;78&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//这个类的很多方法都有做字符串为空的判断&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//字符串是否为空&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(CharSequence cs)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//字符串是否非空&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isNotEmpty&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(CharSequence cs)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//去前后空格，null安全&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//如果是null或者空串都返回null，否则原样返回&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;trimToNull&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//如果是null或者空串都返回空串，否则原样返回&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;trimToEmpty&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//从str的开头和结尾中删除stripChars中出现的字符&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, String stripChars)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//字符串判等，cs1、cs2可为null&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(CharSequence cs1, CharSequence cs2)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//待查找目标在原始字符串中出现的位置，处理了null串的问题&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(…)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//同上，反向查找&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;lastIndexOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(…)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//待查串在目标串中出现第ordinal次的位置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ordincalIndexOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(CharSequence str, CharSequence searchStr, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; ordinal)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//同上，反向查找&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;lastOrdinalIndexOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(…)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//子串截取&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; star)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//截取左边&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; len)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//截取右边&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; len)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//从pos开始截取len长度&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;mid&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; pos, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; len)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//截取第一次出现separator之前的字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;substringBefore&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, String separator)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//截取第一次出现separator之后的字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;substringAfter&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, String separator)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//截取最后一次出现separator之前的字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;substringBeforeLast&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, String separator)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//截取最后一次出现separator之后的字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;substringAfterLast&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, String separator)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//截取第一次和第二次出现tag之间的字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;substringBetween&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, String tag)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//截取所有open和close串之间的字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String[] substringBetween(String str, String open, String close);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//分割字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String[] split(String str, String separatorChars);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//连接字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; &lt;span class=&quot;function&quot;&gt;String &lt;span class=&quot;title&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(T… elements)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//使用separator连接字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Object[] array, &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; separator)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//删除以特定字符串开头的字符串头，如果没有就不删除&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;removeStart&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, String remove)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//删除以特定字符串结束的字符串接诶，如果没有就不删除&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;removeEnd&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, String remove)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//如果短于size，则用padChar在左侧自动补齐，如果是null，还是返回null&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;leftPad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; size, &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; padChar)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//同上，右侧自动补齐&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;rightPad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; size, &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; padChar)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//短于size，则在两侧用空格自动补齐&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;center&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; size)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//使首字母大写&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;capitalize&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//使字母反向大小写&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;swapCase&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//字符串翻转&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;reverse&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//以separator进行翻转&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;reverseDelimited&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; separatorChar)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//超过maxWidth时，maxWidth长度的最后三位用…表示，如果maxWidth小于4，会报错（null和空串原样返回）&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;abbreviate&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; maxWidth)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//查找两个字符串的第一个不同之处的位置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;indexOfDifference&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(CharSequence cs1, CharSequence cs2)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//获取两个串的相同前缀&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getCommonPrefix&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String.. strs)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//求两个串的编辑距离&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getLevenshteinDistance&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(CharSequence s, CharSequence t)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//用wrapWith字符将str包裹起来（null和空串原样返回）&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;wrap&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String str, &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; wrapWith)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;RandomStringUtils&quot;&gt;&lt;a href=&quot;#RandomStringUtils&quot; class=&quot;headerlink&quot; title=&quot;RandomStringUtils:&quot;&gt;&lt;/a&gt;RandomStringUtils:&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;生成随机的字符串
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;RandomUtils&quot;&gt;&lt;a href=&quot;#RandomUtils&quot; class=&quot;headerlink&quot; title=&quot;RandomUtils:&quot;&gt;&lt;/a&gt;RandomUtils:&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;生成某一范围内的随机数
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;Pair&quot;&gt;&lt;a href=&quot;#Pair&quot; class=&quot;headerlink&quot; title=&quot;Pair:&quot;&gt;&lt;/a&gt;Pair:&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;二元组
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;Triple&quot;&gt;&lt;a href=&quot;#Triple&quot; class=&quot;headerlink&quot; title=&quot;Triple:&quot;&gt;&lt;/a&gt;Triple:&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;三元组 //如果要return两个或者三个数据，可以用这两个类封一下，而不需要额外定义类
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;DateUtils&quot;&gt;&lt;a href=&quot;#DateUtils&quot; class=&quot;headerlink&quot; title=&quot;DateUtils:&quot;&gt;&lt;/a&gt;DateUtils:&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//增加年份，还有Months、Days等&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Date &lt;span class=&quot;title&quot;&gt;addYears&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Date date, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; amount)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//设置年份，还有Months、Days等&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Date &lt;span class=&quot;title&quot;&gt;setYears&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Date date, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; amount)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Date转Calendar&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Calendar &lt;span class=&quot;title&quot;&gt;toCalendar&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Date date)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//根据field截取时间，field可以是年(Calendar.YEAR)月日时分秒&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Date &lt;span class=&quot;title&quot;&gt;truncate&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Date date, &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; field)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//根据field四舍五入时间&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Date &lt;span class=&quot;title&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Date date, &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; field)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//根据field上取整时间&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Date &lt;span class=&quot;title&quot;&gt;ceiling&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Date date, &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; field)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;StopWatch&quot;&gt;&lt;a href=&quot;#StopWatch&quot; class=&quot;headerlink&quot; title=&quot;StopWatch:&quot;&gt;&lt;/a&gt;StopWatch:&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;用于计时的一个工具类
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;ExceptionUtil&quot;&gt;&lt;a href=&quot;#ExceptionUtil&quot; class=&quot;headerlink&quot; title=&quot;ExceptionUtil:&quot;&gt;&lt;/a&gt;ExceptionUtil:&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//从Throwable中获取错误堆栈字符串&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getStackTrace&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Throwable throwable)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//获取错误堆栈数组&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Throwable[] getThrowables(Throwable throwable);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//获取错误堆栈列表&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;Throwable&amp;gt; &lt;span class=&quot;title&quot;&gt;getThrowableList&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Throwable throwable)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//获取根错误&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Throwable &lt;span class=&quot;title&quot;&gt;getRootCause&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Throwable throwable)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;ClassUtils&quot;&gt;&lt;a href=&quot;#ClassUtils&quot; class=&quot;headerlink&quot; title=&quot;ClassUtils:&quot;&gt;&lt;/a&gt;ClassUtils:&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//根据实例获取短类名&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getShortClassName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Object object, String valueIfNull)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//根据类获取短类名&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getShortClassName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Class&amp;lt;?&amp;gt; cls)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//获取简单类名&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getSimpleName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Class&amp;lt;?&amp;gt; cls)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//获取包名&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getPackageName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Class&amp;lt;?&amp;gt; cls)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//获取所有的父类&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;Class&amp;lt;?&amp;gt;&amp;gt; getAllSuperclasses(Class&amp;lt;?&amp;gt; cls);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//获取所有的接口&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;Class&amp;lt;?&amp;gt;&amp;gt; getAllInterfaces(Class&amp;lt;?&amp;gt; cls);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//判断是否可以转型&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isAssignable&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Class&amp;lt;?&amp;gt;[] classArray, Class… toClassArray)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;org-apache-commons-lang3-reflect下的一些包：&quot;&gt;&lt;a href=&quot;#org-apache-commons-lang3-reflect下的一些包：&quot; class=&quot;headerlink&quot; title=&quot;org.apache.commons.lang3.reflect下的一些包：&quot;&gt;&lt;/a&gt;org.apache.commons.lang3.reflect下的一些包：&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//使用这些工具类，会使反射操作比较方便&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;ConstructorUtils&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;FiledUtils&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;InheritanceUtils&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;MemberUtils&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;MethodUtils&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Typed&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;TypeLiteral&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;TypeUtils&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ArraysUtils&quot;&gt;&lt;a href=&quot;#ArraysUtils&quot; class=&quot;headerlink&quot; title=&quot;ArraysUtils:&quot;&gt;&lt;/a&gt;ArraysUtils:&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//这个类的很多方法都有做数组为空的判断&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//数组转字符串，便于打印日志&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Object array)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//数组转Map，Entry数组或者n行2列的数组才行&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Map&amp;lt;Object, Object&amp;gt; &lt;span class=&quot;title&quot;&gt;toMap&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Object[] array)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//如果数组为null，返回一个空数组，否则返回本身&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; ..[] nullToEmpty(..[] array);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//取数组的一个前闭后开的区间&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; ..[] subarray(..[] array, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; startIndexInclusive, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; endIndexExclusive);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//数组是否等长，一个为null，一个为空也算等长&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;isSameLength&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(..[] array1, ..[] array2)&lt;/span&gt;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//包装类型和原始类型互换&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] toPrimitive(Integer[] array);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;[] toPrimitive(Integer[] array, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; valueForNull);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//原始类型和包装类型互换&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Integer[] toObject(in[] array);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//返回array1和array2合并后的结果，并不改变原始数组&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; T[] addAll(T[] array1, T.. array2);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;array强转成object，然后通过getClass().getComponentType()可以获取到数组的实际类型，可以由此做些统一的逻辑处理&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="java" scheme="http://blog.aha-nstd.com/categories/java/"/>
    
    
      <category term="java" scheme="http://blog.aha-nstd.com/tags/java/"/>
    
      <category term="common-lang3" scheme="http://blog.aha-nstd.com/tags/common-lang3/"/>
    
  </entry>
  
  <entry>
    <title>CodeFights Challenges Cipher_Zeroes</title>
    <link href="http://blog.aha-nstd.com/2016/06/04/CodeFights-Challenges-Cipher-Zeroes/"/>
    <id>http://blog.aha-nstd.com/2016/06/04/CodeFights-Challenges-Cipher-Zeroes/</id>
    <published>2016-06-04T10:17:51.000Z</published>
    <updated>2017-03-03T09:39:34.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;- 写在前面&quot;&gt;&lt;/a&gt;- 写在前面&lt;/h2&gt;&lt;p&gt;最近在玩CodeFights（一个进行在线编程PK的网站），这个网站蛮有意思的。相比于ACM的题目，这里的可能简单一点，不过做了几场感觉学到不少（因为可以看别人代码啊！！！）。主要玩法有两种：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;CodeWriting：根据题意，完成一个实现相应功能的函数（代码长度越短【空格、回车、注释不记长度】、耗时越少排名越高）&lt;/li&gt;
&lt;li&gt;Bugfix：给出一段有bug的代码，根据题意修复代码&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;为了记录和总结，以后如果有看到好的解法、思路都会在博客中分享出来！&lt;/p&gt;
&lt;h2 id=&quot;题目-Cipher-Zeroes&quot;&gt;&lt;a href=&quot;#题目-Cipher-Zeroes&quot; class=&quot;headerlink&quot; title=&quot;- 题目 Cipher_Zeroes&quot;&gt;&lt;/a&gt;- 题目 &lt;a href=&quot;https://codefights.com/challenge/x9TcPgiFRmgN22W44/main&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Cipher_Zeroes&lt;/a&gt;&lt;/h2&gt;&lt;h3 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h3&gt;&lt;p&gt;假如有如下前提：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;0, 6, 9 这三个数中有一个可见的0&lt;/li&gt;
&lt;li&gt;8 有两个可见的0&lt;/li&gt;
&lt;li&gt;其他数字没有可见的0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;给定一串数字N，假设M是N中可见0的个数，如果M是大于0的偶数，返回M-1的二进制形式；如果M是奇数，返回M+1的二进制形式；否则返回0。&lt;/p&gt;
&lt;p&gt;补全如下函数（java 版）：&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Cipher_Zeroes&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String N)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;样例&quot;&gt;&lt;a href=&quot;#样例&quot; class=&quot;headerlink&quot; title=&quot;样例&quot;&gt;&lt;/a&gt;样例&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;N = “565”&lt;br&gt;Cipher_Zeroes(N) = 10&lt;/p&gt;
&lt;p&gt;解释：&lt;br&gt;565 中只有6有一个可见0，即：M&lt;sub&gt;1&lt;/sub&gt; = 1&lt;br&gt;M1是奇数，所以结果要加1，M&lt;sub&gt;2&lt;/sub&gt; = 2&lt;br&gt;最终结果为：2&lt;sub&gt;10&lt;/sub&gt; = 10&lt;sub&gt;2&lt;/sub&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;分析&quot;&gt;&lt;a href=&quot;#分析&quot; class=&quot;headerlink&quot; title=&quot;- 分析&quot;&gt;&lt;/a&gt;- 分析&lt;/h2&gt;&lt;h3 id=&quot;我的思路&quot;&gt;&lt;a href=&quot;#我的思路&quot; class=&quot;headerlink&quot; title=&quot;我的思路&quot;&gt;&lt;/a&gt;我的思路&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;根据前提统计可见0的个数&lt;/li&gt;
&lt;li&gt;判奇偶&lt;/li&gt;
&lt;li&gt;用系统函数Integer.parseInt(Integer.toBinaryString(s));返回结果。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;为了使代码尽量短，判断0、6、9的时候不能用 d == 0 || d == 6 || d == 9 的形式（16个字符），因为都是3的倍数，可以用模3的形式判断 d % 3 == 0 &amp;amp;&amp;amp; d != 3 （12个字符）&lt;/p&gt;
&lt;p&gt;代码如下（176个有效字符，为了方便，以后将省略中文，直接标数字）：&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; s, d;                                               &lt;span class=&quot;comment&quot;&gt;//0-7字符&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Cipher_Zeroes&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String N)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; c : N.toCharArray()) &amp;#123;                     &lt;span class=&quot;comment&quot;&gt;//1-67字符&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        d = c - &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        s += (d % &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; d != &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; ? &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; : (d == &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; ? &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    s += (s % &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ? &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; : (s &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; ? -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;));           &lt;span class=&quot;comment&quot;&gt;//2-25字符&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; Integer.parseInt(Integer.toBinaryString(s)); &lt;span class=&quot;comment&quot;&gt;//3-50字符&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;当时已经有上百人提交答案了，而从solutions board看到最短代码才124个字符，差了1/3啊！离Challenges结束还有近1个小时，但是又想不到更好的解法，有点抓狂。在漫长地等待之后，满怀着期待与憧憬终于可以看到别人的思路了，简直比洞房花烛夜等待揭开新娘的面纱还要焦急(／‵Д′)／~ ╧╧&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;看了前3页的答案之后，有种脑洞被打开的感觉！！！&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;别人的思路&quot;&gt;&lt;a href=&quot;#别人的思路&quot; class=&quot;headerlink&quot; title=&quot;别人的思路&quot;&gt;&lt;/a&gt;别人的思路&lt;/h3&gt;&lt;p&gt;别人普遍使用的是&lt;em&gt;查表法&lt;/em&gt;，不过有三种查表的方法，真他妈神奇！&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;方法一（144）&lt;/p&gt;
 &lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//from: sameerkhan2k&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; c, r, d = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;                                            &lt;span class=&quot;comment&quot;&gt;//0-11&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Cipher_Zeroes&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String n)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i: n.getBytes())                               &lt;span class=&quot;comment&quot;&gt;//1-54&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        c += &lt;span class=&quot;string&quot;&gt;&quot;1000001021&quot;&lt;/span&gt;.charAt(i - &lt;span class=&quot;number&quot;&gt;48&lt;/span&gt;) - &lt;span class=&quot;number&quot;&gt;48&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ( c += c % &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;? -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; c &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; c /= &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, d *= &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)    &lt;span class=&quot;comment&quot;&gt;//2、3-44&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        r += d * (c &amp;amp; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; r;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt; 第一步，这是最直观的字符串查表法。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;0 ==&amp;gt; “1”&lt;br&gt; 1 ==&amp;gt; “0”&lt;br&gt; 2 ==&amp;gt; “0”&lt;br&gt; :&lt;br&gt; 6 ==&amp;gt; “1”&lt;br&gt; 7 ==&amp;gt; “0”&lt;br&gt; 8 ==&amp;gt; “2”&lt;br&gt; 9 ==&amp;gt; “1”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; 第二步和第三步合并了，没用系统函数而是手动计算的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;方法二（129）&lt;/p&gt;
 &lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//from: todayhumor&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; h;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Integer I;                                              &lt;span class=&quot;comment&quot;&gt;//0-14&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Cipher_Zeroes&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String N)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; e:N.getBytes())                            &lt;span class=&quot;comment&quot;&gt;//1-42&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        h += &lt;span class=&quot;number&quot;&gt;397313&lt;/span&gt; &amp;gt;&amp;gt; e*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;96&lt;/span&gt; &amp;amp; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; I.decode(I.toString(h&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;?h+h%&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;*&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;));   &lt;span class=&quot;comment&quot;&gt;//2、3-46&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt; 对于 397313 这个神奇的网站，哦不，神奇的数字，大家可能一头雾水，我们先把Magic Number 397313 转成二进制以后看看：1100001000000000001。&lt;br&gt; 光看这个数其实还看不出什么，咱往后再瞧瞧。&lt;br&gt; e是每个字符的int值，从’0’到’9’对应48到57，随便代入两个值到 += 后面的表达式试试：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;当 e = 48 (‘0’)时&lt;br&gt;e * 2 - 96 = 0&lt;br&gt;1 10 00 01 00 00 00 00 00 01&lt;sub&gt;2&lt;/sub&gt; &amp;amp; 3&lt;sub&gt;10&lt;/sub&gt; = 1&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;当 e = 49 (‘1’)时&lt;br&gt;e * 2 - 96 = 2&lt;br&gt;1 10 00 01 00 00 00 00 00 &lt;span style=&quot;color:#E0E0E0;&quot;&gt;01&lt;/span&gt;&lt;sub&gt;2&lt;/sub&gt; &amp;amp; 3&lt;sub&gt;10&lt;/sub&gt; = 0&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;当 e = 56 (‘8’)时&lt;br&gt;e * 2 - 96 = 16&lt;br&gt;1 10 &lt;span style=&quot;color:#E0E0E0;&quot;&gt;00 01 00 00 00 00 00 01&lt;/span&gt;&lt;sub&gt;2&lt;/sub&gt; &amp;amp; 3&lt;sub&gt;10&lt;/sub&gt; = 2&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;当 e = 57 (‘9’)时&lt;br&gt;e * 2 - 96 = 18&lt;br&gt;1 &lt;span style=&quot;color:#E0E0E0;&quot;&gt;10 00 01 00 00 00 00 00 01&lt;/span&gt;&lt;sub&gt;2&lt;/sub&gt; &amp;amp; 3&lt;sub&gt;10&lt;/sub&gt; = 1&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt; 恍然大悟，这是神奇的二进制查表法！！&lt;br&gt; 1100001000000000001 从右往左每两位组成表中的一个值，通过右移操作，移到表中的指定位置，用3&lt;sub&gt;10&lt;/sub&gt; =&amp;gt; 11&lt;sub&gt;2&lt;/sub&gt;这个mask取出对应位置的值。不过用二进制表的时候，有个字段长度的限制，最多只能用于64位的表（long）。&lt;/p&gt;
&lt;p&gt; 第二步的奇数+1，偶数-1实现的也蛮有意思的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;h + h % 2 * 2 - 1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; 才知道，Integer.decode()方法能将字符串型的数字转为数字。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;方法三（124）&lt;/p&gt;
 &lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//from: zerael&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Cipher_Zeroes&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String N)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       Integer r = N.replaceAll(&lt;span class=&quot;string&quot;&gt;&quot;(8)|[^690]&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;$1$1&quot;&lt;/span&gt;).length()+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;^&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//0、1-56&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; r.valueOf(r.toString(r&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; ? r-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;));              &lt;span class=&quot;comment&quot;&gt;//2、3-41&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt; 这人竟然用正则替换，弄了一个转换表出来！WTF！&lt;br&gt; 这个正则替换的意思是：&lt;br&gt; 当前字符如果是8，将其替换为88（\$1是使用第一个捕获的分组进行替换，也就是小括号中的8）；当前字符如果不是6、9、0（也就是1、2、3、4、5、7），将其替换为空（因为[^690]没有被包在分组中，所以\$1不起效）；其他（6、9、0）维持不变。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;举两个例子：&lt;/p&gt;
&lt;p&gt;“565”.replaceAll(“(8)|[^690]”, “\$1\$1”).length() + 1 ^ 1&lt;br&gt;==&amp;gt; “6”.length() + 1 ^ 1&lt;br&gt;==&amp;gt; 1 + 1 ^ 1&lt;br&gt;==&amp;gt; 3&lt;/p&gt;
&lt;p&gt;“8200”.replaceAll(“(8)|[^690]”, “\$1\$1”).length() + 1 ^ 1&lt;br&gt;==&amp;gt; “8800”.length() + 1 ^ 1&lt;br&gt;==&amp;gt; 4 + 1 ^ 1&lt;br&gt;==&amp;gt; 4&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; 第一行，其实是把第一步和第二步的一半合并了。&lt;br&gt; 第二步的奇数+1，偶数-1实现方式：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(n + 1 ^ 1) - 1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; 才知道，Integer的toString()方法能指定转换的基数。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;写在最后&quot;&gt;&lt;a href=&quot;#写在最后&quot; class=&quot;headerlink&quot; title=&quot;-写在最后&quot;&gt;&lt;/a&gt;-写在最后&lt;/h2&gt;&lt;p&gt;有趣！！！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;- 写在前面&quot;&gt;&lt;/a&gt;- 写在前面&lt;/h2&gt;&lt;p&gt;最近在玩CodeFights（一个进行在线编程PK的网站），这个网站蛮有意思的。相比于ACM的题目，这里的可能简单一点，不过做了几场感觉学到不少（因为可以看别人代码啊！！！）。主要玩法有两种：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;CodeWriting：根据题意，完成一个实现相应功能的函数（代码长度越短【空格、回车、注释不记长度】、耗时越少排名越高）&lt;/li&gt;
&lt;li&gt;Bugfix：给出一段有bug的代码，根据题意修复代码&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;为了记录和总结，以后如果有看到好的解法、思路都会在博客中分享出来！&lt;/p&gt;
&lt;h2 id=&quot;题目-Cipher-Zeroes&quot;&gt;&lt;a href=&quot;#题目-Cipher-Zeroes&quot; class=&quot;headerlink&quot; title=&quot;- 题目 Cipher_Zeroes&quot;&gt;&lt;/a&gt;- 题目 &lt;a href=&quot;https://codefights.com/challenge/x9TcPgiFRmgN22W44/main&quot;&gt;Cipher_Zeroes&lt;/a&gt;&lt;/h2&gt;&lt;h3 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h3&gt;&lt;p&gt;假如有如下前提：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;0, 6, 9 这三个数中有一个可见的0&lt;/li&gt;
&lt;li&gt;8 有两个可见的0&lt;/li&gt;
&lt;li&gt;其他数字没有可见的0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;给定一串数字N，假设M是N中可见0的个数，如果M是大于0的偶数，返回M-1的二进制形式；如果M是奇数，返回M+1的二进制形式；否则返回0。&lt;/p&gt;
&lt;p&gt;补全如下函数（java 版）：&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Cipher_Zeroes&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String N)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;样例&quot;&gt;&lt;a href=&quot;#样例&quot; class=&quot;headerlink&quot; title=&quot;样例&quot;&gt;&lt;/a&gt;样例&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;N = “565”&lt;br&gt;Cipher_Zeroes(N) = 10&lt;/p&gt;
&lt;p&gt;解释：&lt;br&gt;565 中只有6有一个可见0，即：M&lt;sub&gt;1&lt;/sub&gt; = 1&lt;br&gt;M1是奇数，所以结果要加1，M&lt;sub&gt;2&lt;/sub&gt; = 2&lt;br&gt;最终结果为：2&lt;sub&gt;10&lt;/sub&gt; = 10&lt;sub&gt;2&lt;/sub&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="CodeFights" scheme="http://blog.aha-nstd.com/categories/CodeFights/"/>
    
    
      <category term="CodeFights" scheme="http://blog.aha-nstd.com/tags/CodeFights/"/>
    
      <category term="String" scheme="http://blog.aha-nstd.com/tags/String/"/>
    
      <category term="Binary" scheme="http://blog.aha-nstd.com/tags/Binary/"/>
    
  </entry>
  
  <entry>
    <title>Android webview 之onPause暂停audio播放</title>
    <link href="http://blog.aha-nstd.com/2016/05/28/webview-pause-audio/"/>
    <id>http://blog.aha-nstd.com/2016/05/28/webview-pause-audio/</id>
    <published>2016-05-28T02:44:31.000Z</published>
    <updated>2017-03-03T09:39:34.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;What&quot;&gt;&lt;a href=&quot;#What&quot; class=&quot;headerlink&quot; title=&quot;What&quot;&gt;&lt;/a&gt;What&lt;/h2&gt;&lt;p&gt;最近，公司里的老司机在帮测试测app的时候，发现一个bug：android端，用webview打开一个活动页，点击活动页中的音乐进行播放，退出webview之后音乐仍在继续播放。&lt;/p&gt;
&lt;p&gt;这个bug之前在浏览技术文章的时候有见过，不过当时只是了解了大致的原因，在脑子里做了个问题的索引，并没有索引解决办法。&lt;/p&gt;
&lt;p&gt;不过大致方向有了，就和老司机说“这个bug我来解”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-2628941275.gif&quot; alt=&quot;英雄气概.gif&quot;&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Why&quot;&gt;&lt;a href=&quot;#Why&quot; class=&quot;headerlink&quot; title=&quot;Why&quot;&gt;&lt;/a&gt;Why&lt;/h2&gt;&lt;p&gt;网上说这是Android的一个bug！&lt;/p&gt;
&lt;h2 id=&quot;HOW&quot;&gt;&lt;a href=&quot;#HOW&quot; class=&quot;headerlink&quot; title=&quot;HOW&quot;&gt;&lt;/a&gt;HOW&lt;/h2&gt;&lt;p&gt;网上解决方法有三种&lt;/p&gt;
&lt;h3 id=&quot;1-在webview所在activity-onPause的时候，调用webView的onPause&quot;&gt;&lt;a href=&quot;#1-在webview所在activity-onPause的时候，调用webView的onPause&quot; class=&quot;headerlink&quot; title=&quot;1.在webview所在activity onPause的时候，调用webView的onPause&quot;&gt;&lt;/a&gt;1.在webview所在activity onPause的时候，调用webView的onPause&lt;/h3&gt;&lt;p&gt;不过SDK 11之前是不能直接调用webView的onPause，所以此处可以用版本号判断加反射来解决，如果觉得判断版本号麻烦，也可直接用反射。（测试无效/(ㄒoㄒ)/~~）&lt;/p&gt;
&lt;h3 id=&quot;2-使用pauseTimers-和resumeTimers&quot;&gt;&lt;a href=&quot;#2-使用pauseTimers-和resumeTimers&quot; class=&quot;headerlink&quot; title=&quot;2.使用pauseTimers()和resumeTimers()&quot;&gt;&lt;/a&gt;2.使用pauseTimers()和resumeTimers()&lt;/h3&gt;&lt;p&gt;在activity onPause的时候调用webView.pauseTimers(), onResume的时候调用webView.resumeTimers()，暂停/启动本app中所有webview的layout解析和js执行。（测试还是无效 (╯°Д°)╯︵ ┻━┻ ）&lt;/p&gt;
&lt;h3 id=&quot;3-退出的时候载入一个空白的网页&quot;&gt;&lt;a href=&quot;#3-退出的时候载入一个空白的网页&quot; class=&quot;headerlink&quot; title=&quot;3.退出的时候载入一个空白的网页&quot;&gt;&lt;/a&gt;3.退出的时候载入一个空白的网页&lt;/h3&gt;&lt;p&gt;这样退出时有效的，但是按Home键（回到主屏）或者电源键（关闭主屏）还是无效。（ಥ_ಥ）&lt;/p&gt;
&lt;p&gt;以下代码来自网络：&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;callHiddenWebViewMethod&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (mWebView != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Method method = WebView.class.getMethod(name);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            method.invoke(mWebView);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (NoSuchMethodException e)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Log.e(&lt;span class=&quot;string&quot;&gt;&quot;No such method: &quot;&lt;/span&gt; + name, e.toString());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (IllegalAccessException e)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Log.e(&lt;span class=&quot;string&quot;&gt;&quot;Illegal Access: &quot;&lt;/span&gt; + name, e.toString());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (InvocationTargetException e)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Log.e(&lt;span class=&quot;string&quot;&gt;&quot;Invocation Target Exception: &quot;&lt;/span&gt; + name, e.toString());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onPause&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onPause();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    mWebView.pauseTimers();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isFinishing())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        mWebView.loadUrl(&lt;span class=&quot;string&quot;&gt;&quot;about:blank&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        setContentView(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; FrameLayout(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    callHiddenWebViewMethod(&lt;span class=&quot;string&quot;&gt;&quot;onPause&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onResume();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    mWebView.resumeTimers();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    callHiddenWebViewMethod(&lt;span class=&quot;string&quot;&gt;&quot;onResume&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;本着 &lt;em&gt;&lt;strong&gt;山不过来，我就过去&lt;/strong&gt;&lt;/em&gt; 的思想，想了一会儿（当然不是一直在想这句话-。-），发现js可以暂停audio的播放，而webview又可以执行js代码，豁然开朗啊！&lt;br&gt;在onPause的时候通过jsInterface来判断网页中是否有audio？是否在播放？在播放就暂停，onResume的时候再恢复。&lt;/p&gt;
&lt;p&gt;以下是核心代码：&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;63&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;65&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;67&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;68&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;69&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;70&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;71&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;72&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;73&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;74&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;75&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;76&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;77&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;78&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;79&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;80&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;81&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;82&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;83&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;84&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;85&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;86&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;87&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;88&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;89&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;90&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;91&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;92&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;93&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;94&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;95&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;96&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;97&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;98&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;99&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;100&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;101&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;102&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;103&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;104&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;105&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;106&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;107&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;108&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;109&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;110&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;111&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Bundle savedInstanceState)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    setContentView(R.layout.web_activity);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    mWebView.getSettings().setJavaScriptEnabled(&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    mWebView.setWebViewClient(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; WebViewClient() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onPageStarted&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(WebView view, String url, Bitmap favicon)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onPageStarted(view, url, favicon);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onPageFinished&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(WebView view, String url)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onPageFinished(view, url);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            mWebView.loadUrl(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            	&lt;span class=&quot;string&quot;&gt;&quot;javascript:var radioTags = document.getElementsByTagName(&#39;audio&#39;);&quot;&lt;/span&gt; + &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            	&lt;span class=&quot;string&quot;&gt;&quot; var isHtmlAudioPaused = false;&quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;if(radioTags.length &amp;gt; 0) &amp;#123;&quot;&lt;/span&gt; + &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    &lt;span class=&quot;string&quot;&gt;&quot;try&amp;#123;window.appJs.log(&#39;has audio&#39;); window.appJs.hasAudio();&amp;#125;catch(err)&amp;#123;&amp;#125;&quot;&lt;/span&gt; + &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;&amp;#125;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            );&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onReceivedError&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(WebView view, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; errorCode,&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                                    String description, String failingUrl) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onReceivedError(view, errorCode, description, failingUrl);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Toast.makeText(WebActivity.&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, description,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                    Toast.LENGTH_SHORT).show();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    mWebView.addJavascriptInterface(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; HookInterface(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;), &lt;span class=&quot;string&quot;&gt;&quot;appJs&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    mWebView.loadUrl(mLoadUrl);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onPause&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onPause();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(isHasAudio) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    	&lt;span class=&quot;comment&quot;&gt;//这里只对页面中只有一个音频的情况做了处理，如果有多个音频需要遍历整个数组记录状态&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        mWebView.loadUrl(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;javascript:audioEty = document.getElementsByTagName(&#39;audio&#39;)[0]; &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;isHtmlAudioPaused = audioEty.paused;&quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;if(!audioEty.paused) &amp;#123;&quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;try&amp;#123;window.appJs.log(&#39;to pause audio&#39;); audioEty.pause();&amp;#125;catch(err)&amp;#123;&amp;#125;&quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;&amp;#125;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        );&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    mWebView.pauseTimers();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isFinishing())&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        mWebView.loadUrl(&lt;span class=&quot;string&quot;&gt;&quot;about:blank&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        setContentView(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; FrameLayout(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;));&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    callHiddenWebViewMethod(&lt;span class=&quot;string&quot;&gt;&quot;onPause&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onResume();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    mWebView.resumeTimers();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(isHasAudio) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        mWebView.loadUrl(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;javascript:audioEty = document.getElementsByTagName(&#39;audio&#39;)[0]; &quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;if(!isHtmlAudioPaused &amp;amp;&amp;amp; audioEty.paused) &amp;#123;&quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;try&amp;#123;window.appJs.log(&#39;to resume audio&#39;); audioEty.play();&amp;#125;catch(err)&amp;#123;&amp;#125;&quot;&lt;/span&gt; +&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;&amp;#125; else &amp;#123;&quot;&lt;/span&gt; + &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&quot;window.appJs.log(&#39;audio not paused&#39;);&quot;&lt;/span&gt; + &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;&amp;#125;&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        );&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    callHiddenWebViewMethod(&lt;span class=&quot;string&quot;&gt;&quot;onResume&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;HookInterface&lt;/span&gt;  &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Context mContext;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/** Instantiate the interface and set the context */&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;HookInterface&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context c)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        mContext = c;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@JavascriptInterface&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;hasAudio&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    	&lt;span class=&quot;comment&quot;&gt;//现在只在加载完html之后做了一次是否有音频的检测&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    	&lt;span class=&quot;comment&quot;&gt;//但如果有动态生成的audio Tag，最好不依赖isHasAudio变量&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    	&lt;span class=&quot;comment&quot;&gt;//而是每次进入onPause和onResume的时候都重新检测下&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        isHasAudio = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Log.d(&lt;span class=&quot;string&quot;&gt;&quot;TAG&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;this webview has audio&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@JavascriptInterface&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String msg)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(msg != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Log.i(&lt;span class=&quot;string&quot;&gt;&quot;TAG&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;from webview log: &quot;&lt;/span&gt; + msg);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;PS&quot;&gt;&lt;a href=&quot;#PS&quot; class=&quot;headerlink&quot; title=&quot;PS&quot;&gt;&lt;/a&gt;PS&lt;/h2&gt;&lt;p&gt;以上只处理了单个audio播放的情况，如果有多个audio，需要遍历所有audio进行判断以及注意状态的缓存&lt;/p&gt;
&lt;h2 id=&quot;Reference&quot;&gt;&lt;a href=&quot;#Reference&quot; class=&quot;headerlink&quot; title=&quot;Reference&quot;&gt;&lt;/a&gt;Reference&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.eoeandroid.com/thread-91052-1-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;WebView 完全退出flash的方法，停止声音的播放&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/5946698/how-to-stop-youtube-video-playing-in-android-webview&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How to stop youtube video playing in Android webview?&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://code.google.com/p/android/issues/detail?id=10282&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Issue 10282:    Public API for WebView.onPause and WebView.onResume&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;What&quot;&gt;&lt;a href=&quot;#What&quot; class=&quot;headerlink&quot; title=&quot;What&quot;&gt;&lt;/a&gt;What&lt;/h2&gt;&lt;p&gt;最近，公司里的老司机在帮测试测app的时候，发现一个bug：android端，用webview打开一个活动页，点击活动页中的音乐进行播放，退出webview之后音乐仍在继续播放。&lt;/p&gt;
&lt;p&gt;这个bug之前在浏览技术文章的时候有见过，不过当时只是了解了大致的原因，在脑子里做了个问题的索引，并没有索引解决办法。&lt;/p&gt;
&lt;p&gt;不过大致方向有了，就和老司机说“这个bug我来解”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-2628941275.gif&quot; alt=&quot;英雄气概.gif&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="android" scheme="http://blog.aha-nstd.com/categories/android/"/>
    
    
      <category term="android" scheme="http://blog.aha-nstd.com/tags/android/"/>
    
      <category term="webview" scheme="http://blog.aha-nstd.com/tags/webview/"/>
    
      <category term="audio" scheme="http://blog.aha-nstd.com/tags/audio/"/>
    
  </entry>
  
  <entry>
    <title>Git+Jenkins之自动构建</title>
    <link href="http://blog.aha-nstd.com/2016/03/23/integrate-git-and-jenkins-auto-build/"/>
    <id>http://blog.aha-nstd.com/2016/03/23/integrate-git-and-jenkins-auto-build/</id>
    <published>2016-03-23T04:01:23.000Z</published>
    <updated>2016-03-25T11:36:57.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;一、起因&quot;&gt;&lt;a href=&quot;#一、起因&quot; class=&quot;headerlink&quot; title=&quot;一、起因&quot;&gt;&lt;/a&gt;一、起因&lt;/h2&gt;&lt;p&gt;公司的服务端维护一份错误码文件：errorCode.json，同时客户端也需要根据这样一份错误码对用户进行提示，错误码Sample如下：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;200&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;0&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;成功&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;300&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;100&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误1&quot;&lt;/span&gt;&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;101&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误2&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;平时都是服务器的同学在群里说 &lt;strong&gt;“加了xxx协议，更新了错误码 -。-”&lt;/strong&gt; 客户端的同学才会去errorCode.json所在的项目（项目计划）更新项目，然后复制出来放到自己的应用项目中。&lt;/p&gt;
&lt;p&gt;这么操作，一来可能会让错误码更新不及时；二来这份文件返回的msg对用户并不友好，有时候需要我们手动设置对应的错误提示，代码中设置并不是一个好的选择，所以我们打算改造这份错误码，添加一些自定义的消息，如果存在自定义消息则使用自定义消息（这些不在本篇文章的讨论范围），改造后的json如下：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;200&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;0&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;成功&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;300&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;100&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;			&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;:  &lt;span class=&quot;string&quot;&gt;&quot;错误1&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;			&lt;span class=&quot;attr&quot;&gt;&quot;cmsg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;这是给用户看的消息&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;101&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误2&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后就出现了这么一个需求：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;自动更新我们项目中的errorCode.json文件，同时要把我们的自定义消息合并进去。&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;后来想想正好用git + jenkins hooks的方式：当有更新push到GitLab（我们内部使用的git管理平台）的时候，调用jenkins的project hook去自动执行相应的job,这个job是个shell脚本，有三步操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;update git project&lt;/li&gt;
&lt;li&gt;merge errorCode.json(此处是使用java做的，怎么方便怎么弄)&lt;/li&gt;
&lt;li&gt;push to git project&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;二、经过&quot;&gt;&lt;a href=&quot;#二、经过&quot; class=&quot;headerlink&quot; title=&quot;二、经过&quot;&gt;&lt;/a&gt;二、经过&lt;/h2&gt;&lt;h3 id=&quot;安装插件&quot;&gt;&lt;a href=&quot;#安装插件&quot; class=&quot;headerlink&quot; title=&quot;安装插件&quot;&gt;&lt;/a&gt;安装插件&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_jenkins_plugin.png&quot; alt=&quot;安装git插件&quot;&gt;&lt;br&gt;进入【插件管理】界面安装以下插件：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/Git+Client+Plugin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git client plugin&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git plugin&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/GitLab+Plugin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitLab Plugin&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/AnsiColor+Plugin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AnsiColor&lt;/a&gt;（可选）这个插件可以让Jenkins的控制台输出的log带有颜色（就和linux控制台那样）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;配置本地Git环境和Jenkins&quot;&gt;&lt;a href=&quot;#配置本地Git环境和Jenkins&quot; class=&quot;headerlink&quot; title=&quot;配置本地Git环境和Jenkins&quot;&gt;&lt;/a&gt;配置本地Git环境和Jenkins&lt;/h3&gt;&lt;h4 id=&quot;配置Git&quot;&gt;&lt;a href=&quot;#配置Git&quot; class=&quot;headerlink&quot; title=&quot;配置Git&quot;&gt;&lt;/a&gt;配置Git&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;先在Jenkins所在机器 &lt;a href=&quot;https://git-scm.com/download/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;安装Git&lt;/a&gt;&lt;br&gt;安装好以后，添加git用户：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;git config --global user.name &lt;span class=&quot;string&quot;&gt;&quot;jenkins&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git config --global user.email &lt;span class=&quot;string&quot;&gt;&quot;jenkins@your-company.com&quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;PS：&lt;strong&gt;GitLab中需要有一个对应的jenkins账号，用来拉取代码&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生成本地账号的ssh秘钥&lt;br&gt;在命令行下(window下，使用Git Bash)进入主目录，执行以下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ssh-keygen -t rsa -C &lt;span class=&quot;string&quot;&gt;&quot;jenkins@your-company.com&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cat ~/.ssh/id_rsa.pub&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后复制出公钥，添加到GitLab对应账号(jenkins)的SSH Keys中，这个公钥是为了让jenkins在拉取代码的时候有相应权限&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生成jenkins的ssh秘钥&lt;br&gt;在命令行下进入 &lt;strong&gt;jenkins的安装目录\.ssh&lt;/strong&gt;，执行以下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ssh-keygen -t rsa&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;cat id_rsa.pub&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后复制出公钥，添加到GitLab对应账号（jenkins）的SSH keys中，这个公钥是为了让jenkins执行shell脚本时，如果shell脚本中有git命令，使其有拉取、提交代码的权限&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;配置Jenkins&quot;&gt;&lt;a href=&quot;#配置Jenkins&quot; class=&quot;headerlink&quot; title=&quot;配置Jenkins&quot;&gt;&lt;/a&gt;配置Jenkins&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;在Jenkins中配置Git&lt;br&gt;进入【&lt;strong&gt;系统管理&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;系统设置&lt;/strong&gt;】&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;设置使用的Git命令行&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_config_1.png&quot; alt=&quot;设置Git&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置Git账号&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_config_2.png&quot; alt=&quot;配置Git账号&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置Gitlab信息&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_config_3.png&quot; alt=&quot;配置Gitlab&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;API Token获取方式&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgitlab_api_token.png&quot; alt=&quot;API Token获取方式&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在Jenkins中配置Git账号&lt;br&gt;&lt;span id=&quot;config-git-credentials&quot;&gt;进入&lt;/span&gt;【&lt;strong&gt;Credentials&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;Global credentials(unrestricted&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;Add Credentials&lt;/strong&gt;】&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_credentials.png&quot; alt=&quot;配置Git账号&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;添加Job&quot;&gt;&lt;a href=&quot;#添加Job&quot; class=&quot;headerlink&quot; title=&quot;添加Job&quot;&gt;&lt;/a&gt;添加Job&lt;/h3&gt;&lt;p&gt;新建一个【&lt;strong&gt;构建一个自由风格的软件项目&lt;/strong&gt;】的Job&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;配置这个Job所用的Git项目信息&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fjenkins_job_git.png&quot; alt=&quot;Job Git Info&quot;&gt;&lt;br&gt;这里的&lt;strong&gt;Credentials&lt;/strong&gt;就是在&lt;a href=&quot;#config-git-credentials&quot;&gt;配置Git账号&lt;/a&gt;中设置的账号；&lt;font color=&quot;red&quot;&gt;如果不配置Git项目信息，Git Push之后这个Job不会自动执行&lt;/font&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置触发器&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fjenkins_job_trigger.png&quot; alt=&quot;Job Trigger&quot;&gt;&lt;br&gt;这里的圈出来的URL，需要配置到Gitlab对应项目的Web Hooks中&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置errorCode所在项目的Web Hooks&lt;br&gt;【&lt;strong&gt;Gitlab&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;选择项目&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;Settings&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;Web Hooks&lt;/strong&gt;】&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgitlab_web_hooks.png&quot; alt=&quot;Gitlab Web Hooks&quot;&gt;&lt;br&gt;设置只有在收到push消息时才自动执行jenkins的job&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置构建环境（可选）&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fjenkins_job_xterm_env.png&quot; alt=&quot;Job Xterm Evn&quot;&gt;&lt;br&gt;shell脚本中如果会输出带颜色的文字，可以设置这个，使Jenkins的Web Console也输出相同的颜色&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置执行的脚本并保存&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fjenkins_job_execute_shell.png&quot; alt=&quot;Job Execute Shell&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;update-sh脚本&quot;&gt;&lt;a href=&quot;#update-sh脚本&quot; class=&quot;headerlink&quot; title=&quot;update.sh脚本&quot;&gt;&lt;/a&gt;update.sh脚本&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;63&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;65&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;67&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;68&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;69&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;###################################################################&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 目录结构:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# .../ErrorCode&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#        tools/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            ECode.jar           //用java写的转换json工具&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            color.sh&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            config.properties   //ECode.jar用的配置文件,配置json文件路径什么的&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            update.sh&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#        plan_project/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            ....../clientErrorCode.json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#        android_application_project/&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            ....../clientErrorCode.json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 注意：&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#    需要把 ErrorCode/下的所有文件的所有者设置为jenkins，&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#    否则jenkins执行这个脚本的时候，会因为缺乏读写权限导致更新、提交git失败&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;###################################################################&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /Users/compile/ErrorCode/tools/color.sh&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /Users/compile/ErrorCode/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; tools&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Blue &lt;span class=&quot;string&quot;&gt;&quot;update plan_project..&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ../plan_project&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git pull origin master&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;update plan_project(clientErrorCode.json) from git failed&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Blue &lt;span class=&quot;string&quot;&gt;&quot;update android_application_project..&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ../android_application_project&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git checkout develop&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;git pull origin develop&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;update android_application_project from git failed&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ../tools&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;java -jar ECode.jar&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-eq&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ../android_application_project&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        git commit -am &lt;span class=&quot;string&quot;&gt;&quot;update clientErrorCode.json by jenkins auto script&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $?  &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;commit android_application_project failed&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        git push origin develop&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;push android_application_project failed&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 0&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;merge clientErrorCod.json failed&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Nstd/Shell/blob/master/color.sh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;[color.sh] on Github&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;ECode-jar&quot;&gt;&lt;a href=&quot;#ECode-jar&quot; class=&quot;headerlink&quot; title=&quot;ECode.jar&quot;&gt;&lt;/a&gt;ECode.jar&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Nstd/ErrorCodeTransformer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;[ECode.jar] on Github&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;三、结果&quot;&gt;&lt;a href=&quot;#三、结果&quot; class=&quot;headerlink&quot; title=&quot;三、结果&quot;&gt;&lt;/a&gt;三、结果&lt;/h2&gt;&lt;p&gt;一劳永逸，快哉。&lt;/p&gt;
&lt;h2 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://jingyan.baidu.com/article/ff42efa904b4d7c19e220282.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度经验：打包可执行jar&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://jingyan.baidu.com/article/219f4bf7d0ef87de442d3820.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度经验：Eclipse jar打包&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/adolfmc/archive/2012/10/07/2713562.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CNBlog：可执行jar引用其他jar&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、起因&quot;&gt;&lt;a href=&quot;#一、起因&quot; class=&quot;headerlink&quot; title=&quot;一、起因&quot;&gt;&lt;/a&gt;一、起因&lt;/h2&gt;&lt;p&gt;公司的服务端维护一份错误码文件：errorCode.json，同时客户端也需要根据这样一份错误码对用户进行提示，错误码Sample如下：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;200&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;0&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;成功&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;300&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;100&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误1&quot;&lt;/span&gt;&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;101&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误2&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;平时都是服务器的同学在群里说 &lt;strong&gt;“加了xxx协议，更新了错误码 -。-”&lt;/strong&gt; 客户端的同学才会去errorCode.json所在的项目（项目计划）更新项目，然后复制出来放到自己的应用项目中。&lt;/p&gt;
&lt;p&gt;这么操作，一来可能会让错误码更新不及时；二来这份文件返回的msg对用户并不友好，有时候需要我们手动设置对应的错误提示，代码中设置并不是一个好的选择，所以我们打算改造这份错误码，添加一些自定义的消息，如果存在自定义消息则使用自定义消息（这些不在本篇文章的讨论范围），改造后的json如下：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;200&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;0&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;成功&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;300&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;100&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;			&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;:  &lt;span class=&quot;string&quot;&gt;&quot;错误1&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;			&lt;span class=&quot;attr&quot;&gt;&quot;cmsg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;这是给用户看的消息&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;101&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误2&quot;&lt;/span&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后就出现了这么一个需求：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;自动更新我们项目中的errorCode.json文件，同时要把我们的自定义消息合并进去。&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;后来想想正好用git + jenkins hooks的方式：当有更新push到GitLab（我们内部使用的git管理平台）的时候，调用jenkins的project hook去自动执行相应的job,这个job是个shell脚本，有三步操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;update git project&lt;/li&gt;
&lt;li&gt;merge errorCode.json(此处是使用java做的，怎么方便怎么弄)&lt;/li&gt;
&lt;li&gt;push to git project
    
    </summary>
    
      <category term="配置" scheme="http://blog.aha-nstd.com/categories/%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="配置" scheme="http://blog.aha-nstd.com/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="git" scheme="http://blog.aha-nstd.com/tags/git/"/>
    
      <category term="jenkins" scheme="http://blog.aha-nstd.com/tags/jenkins/"/>
    
  </entry>
  
  <entry>
    <title>Stetho</title>
    <link href="http://blog.aha-nstd.com/2016/03/15/Stetho/"/>
    <id>http://blog.aha-nstd.com/2016/03/15/Stetho/</id>
    <published>2016-03-15T13:27:57.000Z</published>
    <updated>2017-03-03T09:22:42.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;什么是Stetho&quot;&gt;&lt;a href=&quot;#什么是Stetho&quot; class=&quot;headerlink&quot; title=&quot;什么是Stetho&quot;&gt;&lt;/a&gt;什么是Stetho&lt;/h2&gt;&lt;h3 id=&quot;Stetho是Facebook出的一款Android调试工具&quot;&gt;&lt;a href=&quot;#Stetho是Facebook出的一款Android调试工具&quot; class=&quot;headerlink&quot; title=&quot;Stetho是Facebook出的一款Android调试工具&quot;&gt;&lt;/a&gt;Stetho是Facebook出的一款Android调试工具&lt;/h3&gt;&lt;p&gt;我们可以用它在Chrome DevTools下查看应用的布局、网络请求、Sqlite、SharedPreference并能通过js来调试代码（使用js进行调试的时候FB只做了初步封装，使用起来会比较麻烦，需要自己进一步封装）&lt;/p&gt;
&lt;h3 id=&quot;来点截图（取自官网）&quot;&gt;&lt;a href=&quot;#来点截图（取自官网）&quot; class=&quot;headerlink&quot; title=&quot;来点截图（取自官网）&quot;&gt;&lt;/a&gt;来点截图（取自&lt;a href=&quot;http://facebook.github.io/stetho/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官网&lt;/a&gt;）&lt;/h3&gt;&lt;h4 id=&quot;Chrome-DevTools&quot;&gt;&lt;a href=&quot;#Chrome-DevTools&quot; class=&quot;headerlink&quot; title=&quot;Chrome DevTools&quot;&gt;&lt;/a&gt;Chrome DevTools&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-discovery.png&quot; alt=&quot;Chrome DevTools&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看网络请求&quot;&gt;&lt;a href=&quot;#查看网络请求&quot; class=&quot;headerlink&quot; title=&quot;查看网络请求&quot;&gt;&lt;/a&gt;查看网络请求&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-network.png&quot; alt=&quot;Network Inspection&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;数据库（可读写）&quot;&gt;&lt;a href=&quot;#数据库（可读写）&quot; class=&quot;headerlink&quot; title=&quot;数据库（可读写）&quot;&gt;&lt;/a&gt;数据库（可读写）&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-sqlite.png&quot; alt=&quot;Database Inspection&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看布局（双向查看）&quot;&gt;&lt;a href=&quot;#查看布局（双向查看）&quot; class=&quot;headerlink&quot; title=&quot;查看布局（双向查看）&quot;&gt;&lt;/a&gt;查看布局（双向查看）&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;用鼠标放在Element面板中的xml节点上，会在应用中高亮对应的布局&lt;/li&gt;
&lt;li&gt;点击Element左边的放大镜，然后点击应用中的布局，会自动跳转到Element面板中的xml节点&lt;br&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-elements.png&quot; alt=&quot;View Hierarchy&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;Javascript-Console&quot;&gt;&lt;a href=&quot;#Javascript-Console&quot; class=&quot;headerlink&quot; title=&quot;Javascript Console&quot;&gt;&lt;/a&gt;Javascript Console&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-js.png&quot; alt=&quot;Javascript Console&quot;&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;在代码中配置stetho&quot;&gt;&lt;a href=&quot;#在代码中配置stetho&quot; class=&quot;headerlink&quot; title=&quot;在代码中配置stetho&quot;&gt;&lt;/a&gt;在代码中配置stetho&lt;/h2&gt;&lt;h3 id=&quot;build-gradle&quot;&gt;&lt;a href=&quot;#build-gradle&quot; class=&quot;headerlink&quot; title=&quot;build.gradle&quot;&gt;&lt;/a&gt;build.gradle&lt;/h3&gt;&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;android &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 如果编译的时候出现OutOfMemory，添加以下配置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    dexOptions &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        incremental &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        javaMaxHeapSize &lt;span class=&quot;string&quot;&gt;&quot;4g&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    buildTypes &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        debug &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// 如果因为加了stetho导致DexIndexOverflowException，需要添加以下配置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            multiDexEnabled &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 只在debug版中加入stetho&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    debugCompile &lt;span class=&quot;string&quot;&gt;&#39;com.facebook.stetho:stetho:1.3.1&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    debugCompile &lt;span class=&quot;string&quot;&gt;&#39;com.facebook.stetho:stetho-js-rhino:1.3.1&#39;&lt;/span&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//debugCompile &#39;com.facebook.stetho:stetho-urlconnection:1.3.1&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 如果因为加了stetho导致DexIndexOverflowException，需要添加以下配置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    debugCompile &lt;span class=&quot;string&quot;&gt;&#39;com.android.support:multidex:1.0.1&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;YourApplication-java&quot;&gt;&lt;a href=&quot;#YourApplication-java&quot; class=&quot;headerlink&quot; title=&quot;YourApplication.java&quot;&gt;&lt;/a&gt;YourApplication.java&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 当前界面显示的Activity，供Console调用&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Activity mAct = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 方便从Console中通过变量名获取mAct对象&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Activity &lt;span class=&quot;title&quot;&gt;getmAct&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;  mAct;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 从java代码中获取、设置mAct&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Activity &lt;span class=&quot;title&quot;&gt;getCurrentActivity&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; mAct;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setCurrentActivity&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Activity act)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.mAct = act;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onCreate();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    DebugUtils.init(context);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;BaseActivity-java&quot;&gt;&lt;a href=&quot;#BaseActivity-java&quot; class=&quot;headerlink&quot; title=&quot;BaseActivity.java&quot;&gt;&lt;/a&gt;BaseActivity.java&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*******************************************************&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * 使用的Activity尽量继承自BaseActivity，以减少配置代码&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; *******************************************************/&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 可以在Console中通过context.mAct.getField()的方式获取私有变量的值&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 把获取的逻辑封装到DebugUtils中，以解除不必要的麻烦&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Object &lt;span class=&quot;title&quot;&gt;getField&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; DebugUtils.getActField(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, name);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 取消引用&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;clearReferences&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    YourApplication app = ((YourApplication)getApplicationContext());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    Activity currActivity = app.getCurrentActivity();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.equals(currActivity)) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        app.setCurrentActivity(&lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ((YourApplication)getApplicationContext()).setCurrentActivity(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onPause&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    clearReferences();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onDestroy&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    clearReferences();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;DebugUtils-java&quot;&gt;&lt;a href=&quot;#DebugUtils-java&quot; class=&quot;headerlink&quot; title=&quot;DebugUtils.java&quot;&gt;&lt;/a&gt;DebugUtils.java&lt;/h3&gt;&lt;p&gt;因为不想把stetho添加到release中，所以需要通过gradle的buildType特性，对debug版和release版做不同处理&lt;/p&gt;
&lt;h4 id=&quot;debug的配置&quot;&gt;&lt;a href=&quot;#debug的配置&quot; class=&quot;headerlink&quot; title=&quot;debug的配置&quot;&gt;&lt;/a&gt;debug的配置&lt;/h4&gt;&lt;p&gt;在src目录下添加debug/java目录，并在java目录中添加相应的package（比如，DebugUtils将添加到com.yourname.tools.util中，那么就在debug/java目录中新建com.yourname.tools.util包，并在util包下新建DebugUtils.java文件）&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; com.yourname.tools.util;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; android.app.Activity;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; android.content.Context;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; android.support.multidex.MultiDex;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.facebook.stetho.Stetho;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.lang.reflect.Field;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * Created by Nstd on 2016/3/14.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DebugUtils&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Context context)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 如果因为加了stetho导致DexIndexOverflowException，需要添加以下配置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        MultiDex.install(context);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 以下是Stetho配置&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        Stetho.initialize(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Stetho.newInitializerBuilder(context)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                .enableDumpapp(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        Stetho.defaultDumperPluginsProvider(context))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                .enableWebKitInspector(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                        Stetho.defaultInspectorModulesProvider(context))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                .build());&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 通过反射获取activity中的私有变量&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Object &lt;span class=&quot;title&quot;&gt;getActField&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Activity activity, String fieldName)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            Field f = activity.getClass().getDeclaredField(fieldName);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            f.setAccessible(&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; f.get(activity);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (NoSuchFieldException e) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            e.printStackTrace();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (IllegalAccessException e) &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            e.printStackTrace();&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;release的配置&quot;&gt;&lt;a href=&quot;#release的配置&quot; class=&quot;headerlink&quot; title=&quot;release的配置&quot;&gt;&lt;/a&gt;release的配置&lt;/h4&gt;&lt;p&gt;在src目录下添加release/java目录，并在java目录中添加相应的package（文件名同上，但是里面的函数都是空实现）&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; com.haizitong.minhang.Tool.util;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; android.content.Context;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; * Created by Nstd on 2016/3/14.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; */&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DebugUtils&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context context)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// release version: empty code&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Object &lt;span class=&quot;title&quot;&gt;getActField&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Activity activity, String fieldName)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//release version: return null&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;其他buildType的配置（参照debug或release）&quot;&gt;&lt;a href=&quot;#其他buildType的配置（参照debug或release）&quot; class=&quot;headerlink&quot; title=&quot;其他buildType的配置（参照debug或release）&quot;&gt;&lt;/a&gt;其他buildType的配置（参照debug或release）&lt;/h4&gt;&lt;h4 id=&quot;PS：网络配置&quot;&gt;&lt;a href=&quot;#PS：网络配置&quot; class=&quot;headerlink&quot; title=&quot;PS：网络配置&quot;&gt;&lt;/a&gt;PS：网络配置&lt;/h4&gt;&lt;p&gt;公司现在用的是HttpUrlConnection，Stetho配置这个的时候侵入性比较强，暂时也用不到，所以不做配置&lt;br&gt;如果需要HttpUrlConnection的配置，可以参看官网Demo的&lt;a href=&quot;https://github.com/facebook/stetho/blob/master/stetho-sample/src/main/java/com/facebook/stetho/sample/Networker.java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;配置&lt;/a&gt;&lt;br&gt;如果用的是okhttp，可以参看官网的这个&lt;a href=&quot;http://facebook.github.io/stetho/#integrations&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;配置&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;编译运行应用&quot;&gt;&lt;a href=&quot;#编译运行应用&quot; class=&quot;headerlink&quot; title=&quot;编译运行应用&quot;&gt;&lt;/a&gt;编译运行应用&lt;/h2&gt;&lt;h2 id=&quot;启动dev控制台&quot;&gt;&lt;a href=&quot;#启动dev控制台&quot; class=&quot;headerlink&quot; title=&quot;启动dev控制台&quot;&gt;&lt;/a&gt;启动dev控制台&lt;/h2&gt;&lt;p&gt;在Chrome的地址栏中输入：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;chrome://inspect&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;启动以后，在页面上应该会出现对应的包名、应用名称，选择需要调试的应用，点击 &lt;font style=&quot;color:rgb(0, 194, 255);&quot;&gt;inspect &lt;/font&gt;，开始调试&lt;/p&gt;
&lt;h3 id=&quot;PS：一直加载刷新不出来&quot;&gt;&lt;a href=&quot;#PS：一直加载刷新不出来&quot; class=&quot;headerlink&quot; title=&quot;PS：一直加载刷新不出来&quot;&gt;&lt;/a&gt;PS：一直加载刷新不出来&lt;/h3&gt;&lt;p&gt;如果启动后一直是加载状态，需要使用VPN翻墙，成功加载一次以后就不需要了&lt;/p&gt;
&lt;h2 id=&quot;调试&quot;&gt;&lt;a href=&quot;#调试&quot; class=&quot;headerlink&quot; title=&quot;调试&quot;&gt;&lt;/a&gt;调试&lt;/h2&gt;&lt;h3 id=&quot;Elements面板&quot;&gt;&lt;a href=&quot;#Elements面板&quot; class=&quot;headerlink&quot; title=&quot;Elements面板&quot;&gt;&lt;/a&gt;Elements面板&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;可以查看当前Activity的布局;&lt;/li&gt;
&lt;li&gt;Elements显示的xml中，YourApplication是根节点，直属子节点是对应的Activity，如果跳转到新的Activity，新的Activity会堆叠到旧Activity之上，就像栈一样;&lt;/li&gt;
&lt;li&gt;在Elements的xml节点上移动鼠标，会在手机屏幕上高亮显示对应的区域;&lt;/li&gt;
&lt;li&gt;点击Elements旁边的放大镜（变成蓝色），然后点击屏幕，随后xml会自动定位到你点击的节点;&lt;/li&gt;
&lt;li&gt;在Styles面板中可以看到布局元素的属性值.&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;bug？&lt;br&gt;查看不了Dialog的布局信息&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Resource面板&quot;&gt;&lt;a href=&quot;#Resource面板&quot; class=&quot;headerlink&quot; title=&quot;Resource面板&quot;&gt;&lt;/a&gt;Resource面板&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Web SQL：中可以查看Sqlite的信息&lt;ul&gt;
&lt;li&gt;点击数据库名称，可以输入sql语句直接操作数据库&lt;/li&gt;
&lt;li&gt;点击表名，可以查看该表的所有数据&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Local Storage：中可以查看SharedPreferences的信息&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;Console面板&quot;&gt;&lt;a href=&quot;#Console面板&quot; class=&quot;headerlink&quot; title=&quot;Console面板&quot;&gt;&lt;/a&gt;Console面板&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;context相当于Application对象&lt;/li&gt;
&lt;li&gt;如果加入了之前的封装（DebugUtils等）&lt;ul&gt;
&lt;li&gt;通过context.mAct获得当前windows中的Activity&lt;/li&gt;
&lt;li&gt;通过context.mAct.公有属性名，可以获取mAct中public属性变量的值&lt;/li&gt;
&lt;li&gt;通过context.mAct.getField(fieldName)可以获取到这个Activity中的私有变量值（当然也可以获取public的）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如果获取的是一个对象，eg：context.mAct.mTvMessage（mTvMessage是个TextView），可能不能直接操作该对象的方法，需要使用importPackage(android.widget)，引入该对象所在的包（将包内的所有java对象引入到jsRuntime中）；或者使用importClass(android.widget.TextView)，只引入TextView对象，此时才能使用context.mAct.mTvMessage.getText()方法&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;PS：其他&quot;&gt;&lt;a href=&quot;#PS：其他&quot; class=&quot;headerlink&quot; title=&quot;PS：其他&quot;&gt;&lt;/a&gt;PS：其他&lt;/h2&gt;&lt;h3 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;- 代码&quot;&gt;&lt;/a&gt;- 代码&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Nstd/AndroidTools&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;前往GitHub&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Android-Studio&quot;&gt;&lt;a href=&quot;#Android-Studio&quot; class=&quot;headerlink&quot; title=&quot;- Android Studio&quot;&gt;&lt;/a&gt;- Android Studio&lt;/h3&gt;&lt;p&gt;如果觉得Android Studio卡，可以尝试修改Studio的配置，增加其使用的内存大小&lt;br&gt;window下：&lt;br&gt;studio安装目录\bin\sudio64.exe.vmoptions:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;-Xmx4096m&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;-XX:MaxPermSize=1024m&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://facebook.github.io/stetho&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官网文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/stetho&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方Github-stetho&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/stetho/tree/master/stetho-js-rhino&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方Github-stetho-js-rhino&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino/Scripting_Java&quot; title=&quot;Javascript Console中可用的相关知识&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Scripting Java&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是Stetho&quot;&gt;&lt;a href=&quot;#什么是Stetho&quot; class=&quot;headerlink&quot; title=&quot;什么是Stetho&quot;&gt;&lt;/a&gt;什么是Stetho&lt;/h2&gt;&lt;h3 id=&quot;Stetho是Facebook出的一款Android调试工具&quot;&gt;&lt;a href=&quot;#Stetho是Facebook出的一款Android调试工具&quot; class=&quot;headerlink&quot; title=&quot;Stetho是Facebook出的一款Android调试工具&quot;&gt;&lt;/a&gt;Stetho是Facebook出的一款Android调试工具&lt;/h3&gt;&lt;p&gt;我们可以用它在Chrome DevTools下查看应用的布局、网络请求、Sqlite、SharedPreference并能通过js来调试代码（使用js进行调试的时候FB只做了初步封装，使用起来会比较麻烦，需要自己进一步封装）&lt;/p&gt;
&lt;h3 id=&quot;来点截图（取自官网）&quot;&gt;&lt;a href=&quot;#来点截图（取自官网）&quot; class=&quot;headerlink&quot; title=&quot;来点截图（取自官网）&quot;&gt;&lt;/a&gt;来点截图（取自&lt;a href=&quot;http://facebook.github.io/stetho/&quot;&gt;官网&lt;/a&gt;）&lt;/h3&gt;&lt;h4 id=&quot;Chrome-DevTools&quot;&gt;&lt;a href=&quot;#Chrome-DevTools&quot; class=&quot;headerlink&quot; title=&quot;Chrome DevTools&quot;&gt;&lt;/a&gt;Chrome DevTools&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-discovery.png&quot; alt=&quot;Chrome DevTools&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看网络请求&quot;&gt;&lt;a href=&quot;#查看网络请求&quot; class=&quot;headerlink&quot; title=&quot;查看网络请求&quot;&gt;&lt;/a&gt;查看网络请求&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-network.png&quot; alt=&quot;Network Inspection&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;数据库（可读写）&quot;&gt;&lt;a href=&quot;#数据库（可读写）&quot; class=&quot;headerlink&quot; title=&quot;数据库（可读写）&quot;&gt;&lt;/a&gt;数据库（可读写）&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-sqlite.png&quot; alt=&quot;Database Inspection&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看布局（双向查看）&quot;&gt;&lt;a href=&quot;#查看布局（双向查看）&quot; class=&quot;headerlink&quot; title=&quot;查看布局（双向查看）&quot;&gt;&lt;/a&gt;查看布局（双向查看）&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;用鼠标放在Element面板中的xml节点上，会在应用中高亮对应的布局&lt;/li&gt;
&lt;li&gt;点击Element左边的放大镜，然后点击应用中的布局，会自动跳转到Element面板中的xml节点&lt;br&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-elements.png&quot; alt=&quot;View Hierarchy&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;Javascript-Console&quot;&gt;&lt;a href=&quot;#Javascript-Console&quot; class=&quot;headerlink&quot; title=&quot;Javascript Console&quot;&gt;&lt;/a&gt;Javascript Console&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-js.png&quot; alt=&quot;Javascript Console&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="android" scheme="http://blog.aha-nstd.com/categories/android/"/>
    
    
      <category term="android" scheme="http://blog.aha-nstd.com/tags/android/"/>
    
      <category term="stetho" scheme="http://blog.aha-nstd.com/tags/stetho/"/>
    
      <category term="配置" scheme="http://blog.aha-nstd.com/tags/%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>关于学习</title>
    <link href="http://blog.aha-nstd.com/2016/02/14/about-learning/"/>
    <id>http://blog.aha-nstd.com/2016/02/14/about-learning/</id>
    <published>2016-02-14T13:29:53.000Z</published>
    <updated>2017-03-03T09:22:42.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;What-amp-Why&quot;&gt;&lt;a href=&quot;#What-amp-Why&quot; class=&quot;headerlink&quot; title=&quot;What &amp;amp; Why&quot;&gt;&lt;/a&gt;What &amp;amp; Why&lt;/h2&gt;&lt;p&gt;我们对这个世界的依恋或迷恋，是我们活下去的动力，而这种迷恋或多或少会以不同的方式成瘾，不理解的人唾之恨之，唯独只有自己知道个中缘由，所以我们需要一套坚固的自我价值体系。&lt;br&gt;然而任何体系都不是完善的，假如不辩证地持守自我体系，迟早会把自己逼入钻牛角尖的境地，时常更新完善这个体系，才能让我们更好地面对自己以及他人。为了完善它，放下羞怯、要面子以及其他会阻碍自己获得充实感的心理因素，自觉或者不自觉地去学习、吸收。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Pre-How&quot;&gt;&lt;a href=&quot;#Pre-How&quot; class=&quot;headerlink&quot; title=&quot;Pre-How&quot;&gt;&lt;/a&gt;Pre-How&lt;/h2&gt;&lt;h5 id=&quot;1-健康&quot;&gt;&lt;a href=&quot;#1-健康&quot; class=&quot;headerlink&quot; title=&quot;1. 健康&quot;&gt;&lt;/a&gt;1. 健康&lt;/h5&gt;&lt;p&gt;健康是做任何一样事情的前提，先学会管理自己的健康（身体和精神）&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;适量的运动&lt;/li&gt;
&lt;li&gt;充足的休息（规律作息）&lt;/li&gt;
&lt;li&gt;每天做一件能让自己开心的事（莫当任务做，是为了真正让自己开心起来）&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&quot;2-注意力&quot;&gt;&lt;a href=&quot;#2-注意力&quot; class=&quot;headerlink&quot; title=&quot;2. 注意力&quot;&gt;&lt;/a&gt;2. 注意力&lt;/h5&gt;&lt;p&gt;集中注意力在当前要做的事上，排除干扰（如果出现干扰，可以尝试快速记下再稍后去做）&lt;/p&gt;
&lt;h5 id=&quot;3-甜头&quot;&gt;&lt;a href=&quot;#3-甜头&quot; class=&quot;headerlink&quot; title=&quot;3. 甜头&quot;&gt;&lt;/a&gt;3. 甜头&lt;/h5&gt;&lt;p&gt;不管学习什么都要先成功学会一样东西，这种成功的经验会帮助我们能有更多的信心去成功地学下一样东西&lt;/p&gt;
&lt;h5 id=&quot;4-坚持&quot;&gt;&lt;a href=&quot;#4-坚持&quot; class=&quot;headerlink&quot; title=&quot;4. 坚持&quot;&gt;&lt;/a&gt;4. 坚持&lt;/h5&gt;&lt;p&gt;如果不能自发地坚持，不用再往下看了。。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;What-amp-Why&quot;&gt;&lt;a href=&quot;#What-amp-Why&quot; class=&quot;headerlink&quot; title=&quot;What &amp;amp; Why&quot;&gt;&lt;/a&gt;What &amp;amp; Why&lt;/h2&gt;&lt;p&gt;我们对这个世界的依恋或迷恋，是我们活下去的动力，而这种迷恋或多或少会以不同的方式成瘾，不理解的人唾之恨之，唯独只有自己知道个中缘由，所以我们需要一套坚固的自我价值体系。&lt;br&gt;然而任何体系都不是完善的，假如不辩证地持守自我体系，迟早会把自己逼入钻牛角尖的境地，时常更新完善这个体系，才能让我们更好地面对自己以及他人。为了完善它，放下羞怯、要面子以及其他会阻碍自己获得充实感的心理因素，自觉或者不自觉地去学习、吸收。&lt;br&gt;
    
    </summary>
    
      <category term="随笔" scheme="http://blog.aha-nstd.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="学习" scheme="http://blog.aha-nstd.com/tags/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="随笔" scheme="http://blog.aha-nstd.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>CSS布局之postion、float、z-index</title>
    <link href="http://blog.aha-nstd.com/2016/01/30/CSS-layout-postion-float-z-index/"/>
    <id>http://blog.aha-nstd.com/2016/01/30/CSS-layout-postion-float-z-index/</id>
    <published>2016-01-30T08:48:50.000Z</published>
    <updated>2017-03-03T09:22:42.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;position（属性）&quot;&gt;&lt;a href=&quot;#position（属性）&quot; class=&quot;headerlink&quot; title=&quot;position（属性）&quot;&gt;&lt;/a&gt;position（属性）&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;static&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;如果没有指定position，浏览器默认position为static，元素处于文档流中，浏览器根据标签来识别到底是块元素还是行内元素。指定的top、right、bottom、left、z-index皆无效，文档流后面的节点会遮盖前面的节点。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;fixed&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;固定位置，根据TRBL确定位置，可以实现类似常驻侧边栏或者固定header、footer的效果。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;relative&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;相对于原有位置，根据TRBL进行偏移（原有位置所在空间仍会保留）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;absolute&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;相对于position为非static属性的祖先节点，进行偏移，如果祖先中没有非static节点，则相对于body进行偏移。 absolute与relative的区别在于：&lt;br&gt;a) absolute元素的原点（top、left）在非static祖先节点的原点上&lt;br&gt;b) relative元素的原点（top、left）是在自己没有设置position: relative;（其实就是自己为static）时的原点上&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;inherit&lt;/strong&gt;&lt;br&gt;继承父节点的position（实际的position布局方式只有四种：static、fixed、relative、absolute）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;float（常见问题）&quot;&gt;&lt;a href=&quot;#float（常见问题）&quot; class=&quot;headerlink&quot; title=&quot;float（常见问题）&quot;&gt;&lt;/a&gt;float（常见问题）&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;浮动标签没有被父标签包裹&lt;/strong&gt;&lt;br&gt;在父标签中设置overflow: auto; （IE6中还需要在父标签中设置zoom: 1;）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;清除浮动&lt;/strong&gt;&lt;br&gt;在需要清除浮动的标签上使用css的clear属性（left、right、both）&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;z-index&quot;&gt;&lt;a href=&quot;#z-index&quot; class=&quot;headerlink&quot; title=&quot;z-index&quot;&gt;&lt;/a&gt;z-index&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;非static元素会覆盖在static元素之上&lt;/li&gt;
&lt;li&gt;z-index只对非static元素有效&lt;/li&gt;
&lt;li&gt;如果没有指定z-index，按节点出现顺序，后面的节点会覆盖在前面的节点之上&lt;/li&gt;
&lt;li&gt;同级元素，设置的z-index值越大越在上面（z-index&amp;gt;=0的元素，在没设z-index的元素之上；z-index&amp;lt;0的元素，在没设z-index元素之下）&lt;/li&gt;
&lt;li&gt;优先响应同级父元素的z-index值，子元素的z-index值比较只在父元素内有效&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://zh.learnlayout.com/position.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;position &amp;amp; float&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.neoease.com/css-z-index-property-and-layering-tree/comment-page-1/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;z-index&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;position（属性）&quot;&gt;&lt;a href=&quot;#position（属性）&quot; class=&quot;headerlink&quot; title=&quot;position（属性）&quot;&gt;&lt;/a&gt;position（属性）&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;static&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;如果没有指定position，浏览器默认position为static，元素处于文档流中，浏览器根据标签来识别到底是块元素还是行内元素。指定的top、right、bottom、left、z-index皆无效，文档流后面的节点会遮盖前面的节点。&lt;/p&gt;
    
    </summary>
    
      <category term="web" scheme="http://blog.aha-nstd.com/categories/web/"/>
    
    
      <category term="css" scheme="http://blog.aha-nstd.com/tags/css/"/>
    
      <category term="position" scheme="http://blog.aha-nstd.com/tags/position/"/>
    
      <category term="float" scheme="http://blog.aha-nstd.com/tags/float/"/>
    
      <category term="z-index" scheme="http://blog.aha-nstd.com/tags/z-index/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://blog.aha-nstd.com/2016/01/30/hello-world/"/>
    <id>http://blog.aha-nstd.com/2016/01/30/hello-world/</id>
    <published>2016-01-30T08:48:00.000Z</published>
    <updated>2017-03-03T09:22:42.000Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;http://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;http://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;http://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;http://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ hexo server&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;http://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ hexo generate&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;http://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ hexo deploy&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;http://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;http://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;http://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;http://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;br&gt;
    
    </summary>
    
      <category term="test" scheme="http://blog.aha-nstd.com/categories/test/"/>
    
    
      <category term="test" scheme="http://blog.aha-nstd.com/tags/test/"/>
    
  </entry>
  
</feed>
