<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Nstd</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.aha-nstd.com/"/>
  <updated>2016-03-25T11:36:57.278Z</updated>
  <id>http://blog.aha-nstd.com/</id>
  
  <author>
    <name>Nstd</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Git+Jenkins之自动构建</title>
    <link href="http://blog.aha-nstd.com/2016/03/23/integrate-git-and-jenkins-auto-build/"/>
    <id>http://blog.aha-nstd.com/2016/03/23/integrate-git-and-jenkins-auto-build/</id>
    <published>2016-03-23T04:01:23.000Z</published>
    <updated>2016-03-25T11:36:57.278Z</updated>
    
    <content type="html">&lt;h2 id=&quot;一、起因&quot;&gt;&lt;a href=&quot;#一、起因&quot; class=&quot;headerlink&quot; title=&quot;一、起因&quot;&gt;&lt;/a&gt;一、起因&lt;/h2&gt;&lt;p&gt;公司的服务端维护一份错误码文件：errorCode.json，同时客户端也需要根据这样一份错误码对用户进行提示，错误码Sample如下：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;200&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;0&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;成功&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;300&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;100&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误1&quot;&lt;/span&gt;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;101&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误2&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;平时都是服务器的同学在群里说 &lt;strong&gt;“加了xxx协议，更新了错误码 -。-”&lt;/strong&gt; 客户端的同学才会去errorCode.json所在的项目（项目计划）更新项目，然后复制出来放到自己的应用项目中。&lt;/p&gt;
&lt;p&gt;这么操作，一来可能会让错误码更新不及时；二来这份文件返回的msg对用户并不友好，有时候需要我们手动设置对应的错误提示，代码中设置并不是一个好的选择，所以我们打算改造这份错误码，添加一些自定义的消息，如果存在自定义消息则使用自定义消息（这些不在本篇文章的讨论范围），改造后的json如下：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;200&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;0&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;成功&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;300&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;100&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;:  &lt;span class=&quot;string&quot;&gt;&quot;错误1&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;attr&quot;&gt;&quot;cmsg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;这是给用户看的消息&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;101&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误2&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后就出现了这么一个需求：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;自动更新我们项目中的errorCode.json文件，同时要把我们的自定义消息合并进去。&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;后来想想正好用git + jenkins hooks的方式：当有更新push到GitLab（我们内部使用的git管理平台）的时候，调用jenkins的project hook去自动执行相应的job,这个job是个shell脚本，有三步操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;update git project&lt;/li&gt;
&lt;li&gt;merge errorCode.json(此处是使用java做的，怎么方便怎么弄)&lt;/li&gt;
&lt;li&gt;push to git project&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;二、经过&quot;&gt;&lt;a href=&quot;#二、经过&quot; class=&quot;headerlink&quot; title=&quot;二、经过&quot;&gt;&lt;/a&gt;二、经过&lt;/h2&gt;&lt;h3 id=&quot;安装插件&quot;&gt;&lt;a href=&quot;#安装插件&quot; class=&quot;headerlink&quot; title=&quot;安装插件&quot;&gt;&lt;/a&gt;安装插件&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_jenkins_plugin.png&quot; alt=&quot;安装git插件&quot;&gt;&lt;br&gt;进入【插件管理】界面安装以下插件：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/Git+Client+Plugin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git client plugin&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Git plugin&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/GitLab+Plugin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitLab Plugin&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/AnsiColor+Plugin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AnsiColor&lt;/a&gt;（可选）这个插件可以让Jenkins的控制台输出的log带有颜色（就和linux控制台那样）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;配置本地Git环境和Jenkins&quot;&gt;&lt;a href=&quot;#配置本地Git环境和Jenkins&quot; class=&quot;headerlink&quot; title=&quot;配置本地Git环境和Jenkins&quot;&gt;&lt;/a&gt;配置本地Git环境和Jenkins&lt;/h3&gt;&lt;h4 id=&quot;配置Git&quot;&gt;&lt;a href=&quot;#配置Git&quot; class=&quot;headerlink&quot; title=&quot;配置Git&quot;&gt;&lt;/a&gt;配置Git&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;先在Jenkins所在机器 &lt;a href=&quot;https://git-scm.com/download/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;安装Git&lt;/a&gt;&lt;br&gt;安装好以后，添加git用户：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git config --global user.name &lt;span class=&quot;string&quot;&gt;&quot;jenkins&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git config --global user.email &lt;span class=&quot;string&quot;&gt;&quot;jenkins@your-company.com&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;PS：&lt;strong&gt;GitLab中需要有一个对应的jenkins账号，用来拉取代码&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生成本地账号的ssh秘钥&lt;br&gt;在命令行下(window下，使用Git Bash)进入主目录，执行以下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh-keygen -t rsa -C &lt;span class=&quot;string&quot;&gt;&quot;jenkins@your-company.com&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat ~/.ssh/id_rsa.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后复制出公钥，添加到GitLab对应账号(jenkins)的SSH Keys中，这个公钥是为了让jenkins在拉取代码的时候有相应权限&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生成jenkins的ssh秘钥&lt;br&gt;在命令行下进入 &lt;strong&gt;jenkins的安装目录\.ssh&lt;/strong&gt;，执行以下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh-keygen -t rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat id_rsa.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后复制出公钥，添加到GitLab对应账号（jenkins）的SSH keys中，这个公钥是为了让jenkins执行shell脚本时，如果shell脚本中有git命令，使其有拉取、提交代码的权限&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;配置Jenkins&quot;&gt;&lt;a href=&quot;#配置Jenkins&quot; class=&quot;headerlink&quot; title=&quot;配置Jenkins&quot;&gt;&lt;/a&gt;配置Jenkins&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;在Jenkins中配置Git&lt;br&gt;进入【&lt;strong&gt;系统管理&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;系统设置&lt;/strong&gt;】&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;设置使用的Git命令行&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_config_1.png&quot; alt=&quot;设置Git&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置Git账号&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_config_2.png&quot; alt=&quot;配置Git账号&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置Gitlab信息&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_config_3.png&quot; alt=&quot;配置Gitlab&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;API Token获取方式&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgitlab_api_token.png&quot; alt=&quot;API Token获取方式&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在Jenkins中配置Git账号&lt;br&gt;&lt;span id=&quot;config-git-credentials&quot;&gt;进入&lt;/span&gt;【&lt;strong&gt;Credentials&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;Global credentials(unrestricted&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;Add Credentials&lt;/strong&gt;】&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgit_credentials.png&quot; alt=&quot;配置Git账号&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;添加Job&quot;&gt;&lt;a href=&quot;#添加Job&quot; class=&quot;headerlink&quot; title=&quot;添加Job&quot;&gt;&lt;/a&gt;添加Job&lt;/h3&gt;&lt;p&gt;新建一个【&lt;strong&gt;构建一个自由风格的软件项目&lt;/strong&gt;】的Job&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;配置这个Job所用的Git项目信息&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fjenkins_job_git.png&quot; alt=&quot;Job Git Info&quot;&gt;&lt;br&gt;这里的&lt;strong&gt;Credentials&lt;/strong&gt;就是在&lt;a href=&quot;#config-git-credentials&quot;&gt;配置Git账号&lt;/a&gt;中设置的账号；&lt;font color=&quot;red&quot;&gt;如果不配置Git项目信息，Git Push之后这个Job不会自动执行&lt;/font&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置触发器&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fjenkins_job_trigger.png&quot; alt=&quot;Job Trigger&quot;&gt;&lt;br&gt;这里的圈出来的URL，需要配置到Gitlab对应项目的Web Hooks中&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置errorCode所在项目的Web Hooks&lt;br&gt;【&lt;strong&gt;Gitlab&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;选择项目&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;Settings&lt;/strong&gt;】-&amp;gt;【&lt;strong&gt;Web Hooks&lt;/strong&gt;】&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fgitlab_web_hooks.png&quot; alt=&quot;Gitlab Web Hooks&quot;&gt;&lt;br&gt;设置只有在收到push消息时才自动执行jenkins的job&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置构建环境（可选）&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fjenkins_job_xterm_env.png&quot; alt=&quot;Job Xterm Evn&quot;&gt;&lt;br&gt;shell脚本中如果会输出带颜色的文字，可以设置这个，使Jenkins的Web Console也输出相同的颜色&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置执行的脚本并保存&lt;br&gt;&lt;img src=&quot;http://7xs1tn.com1.z0.glb.clouddn.com/blog-post%2Fjenkins_job_execute_shell.png&quot; alt=&quot;Job Execute Shell&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;update-sh脚本&quot;&gt;&lt;a href=&quot;#update-sh脚本&quot; class=&quot;headerlink&quot; title=&quot;update.sh脚本&quot;&gt;&lt;/a&gt;update.sh脚本&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;###################################################################&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 目录结构:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# .../ErrorCode&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#        tools/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            ECode.jar           //用java写的转换json工具&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            color.sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            config.properties   //ECode.jar用的配置文件,配置json文件路径什么的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            update.sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#        plan_project/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            ....../clientErrorCode.json&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#        android_application_project/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#            ....../clientErrorCode.json&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 注意：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#    需要把 ErrorCode/下的所有文件的所有者设置为jenkins，&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#    否则jenkins执行这个脚本的时候，会因为缺乏读写权限导致更新、提交git失败&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;###################################################################&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; /Users/compile/ErrorCode/tools/color.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /Users/compile/ErrorCode/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; tools&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Blue &lt;span class=&quot;string&quot;&gt;&quot;update plan_project..&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ../plan_project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git pull origin master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;update plan_project(clientErrorCode.json) from git failed&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Blue &lt;span class=&quot;string&quot;&gt;&quot;update android_application_project..&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ../android_application_project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout develop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git pull origin develop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;update android_application_project from git failed&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ../tools&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java -jar ECode.jar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-eq&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ../android_application_project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        git commit -am &lt;span class=&quot;string&quot;&gt;&quot;update clientErrorCode.json by jenkins auto script&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $?  &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;commit android_application_project failed&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        git push origin develop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; [ $? &lt;span class=&quot;_&quot;&gt;-ne&lt;/span&gt; 0 ]; &lt;span class=&quot;keyword&quot;&gt;then&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;push android_application_project failed&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt;Error &lt;span class=&quot;string&quot;&gt;&quot;merge clientErrorCod.json failed&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt; 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Nstd/Shell/blob/master/color.sh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;[color.sh] on Github&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;ECode-jar&quot;&gt;&lt;a href=&quot;#ECode-jar&quot; class=&quot;headerlink&quot; title=&quot;ECode.jar&quot;&gt;&lt;/a&gt;ECode.jar&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Nstd/ErrorCodeTransformer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;[ECode.jar] on Github&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;三、结果&quot;&gt;&lt;a href=&quot;#三、结果&quot; class=&quot;headerlink&quot; title=&quot;三、结果&quot;&gt;&lt;/a&gt;三、结果&lt;/h2&gt;&lt;p&gt;一劳永逸，快哉。&lt;/p&gt;
&lt;h2 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://jingyan.baidu.com/article/ff42efa904b4d7c19e220282.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度经验：打包可执行jar&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://jingyan.baidu.com/article/219f4bf7d0ef87de442d3820.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度经验：Eclipse jar打包&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/adolfmc/archive/2012/10/07/2713562.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CNBlog：可执行jar引用其他jar&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、起因&quot;&gt;&lt;a href=&quot;#一、起因&quot; class=&quot;headerlink&quot; title=&quot;一、起因&quot;&gt;&lt;/a&gt;一、起因&lt;/h2&gt;&lt;p&gt;公司的服务端维护一份错误码文件：errorCode.json，同时客户端也需要根据这样一份错误码对用户进行提示，错误码Sample如下：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;200&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;0&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;成功&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;300&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;100&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误1&quot;&lt;/span&gt;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;101&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误2&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;平时都是服务器的同学在群里说 &lt;strong&gt;“加了xxx协议，更新了错误码 -。-”&lt;/strong&gt; 客户端的同学才会去errorCode.json所在的项目（项目计划）更新项目，然后复制出来放到自己的应用项目中。&lt;/p&gt;
&lt;p&gt;这么操作，一来可能会让错误码更新不及时；二来这份文件返回的msg对用户并不友好，有时候需要我们手动设置对应的错误提示，代码中设置并不是一个好的选择，所以我们打算改造这份错误码，添加一些自定义的消息，如果存在自定义消息则使用自定义消息（这些不在本篇文章的讨论范围），改造后的json如下：&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;200&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;0&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;成功&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attr&quot;&gt;&quot;300&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;100&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;:  &lt;span class=&quot;string&quot;&gt;&quot;错误1&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;attr&quot;&gt;&quot;cmsg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;这是给用户看的消息&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;attr&quot;&gt;&quot;101&quot;&lt;/span&gt;: &amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;msg&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;错误2&quot;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后就出现了这么一个需求：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;自动更新我们项目中的errorCode.json文件，同时要把我们的自定义消息合并进去。&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;后来想想正好用git + jenkins hooks的方式：当有更新push到GitLab（我们内部使用的git管理平台）的时候，调用jenkins的project hook去自动执行相应的job,这个job是个shell脚本，有三步操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;update git project&lt;/li&gt;
&lt;li&gt;merge errorCode.json(此处是使用java做的，怎么方便怎么弄)&lt;/li&gt;
&lt;li&gt;push to git project
    
    </summary>
    
      <category term="配置" scheme="http://blog.aha-nstd.com/categories/%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="配置" scheme="http://blog.aha-nstd.com/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="git" scheme="http://blog.aha-nstd.com/tags/git/"/>
    
      <category term="jenkins" scheme="http://blog.aha-nstd.com/tags/jenkins/"/>
    
  </entry>
  
  <entry>
    <title>Stetho</title>
    <link href="http://blog.aha-nstd.com/2016/03/15/Stetho/"/>
    <id>http://blog.aha-nstd.com/2016/03/15/Stetho/</id>
    <published>2016-03-15T13:27:57.000Z</published>
    <updated>2016-03-23T03:52:35.382Z</updated>
    
    <content type="html">&lt;h2 id=&quot;什么是Stetho&quot;&gt;&lt;a href=&quot;#什么是Stetho&quot; class=&quot;headerlink&quot; title=&quot;什么是Stetho&quot;&gt;&lt;/a&gt;什么是Stetho&lt;/h2&gt;&lt;h3 id=&quot;Stetho是Facebook出的一款Android调试工具&quot;&gt;&lt;a href=&quot;#Stetho是Facebook出的一款Android调试工具&quot; class=&quot;headerlink&quot; title=&quot;Stetho是Facebook出的一款Android调试工具&quot;&gt;&lt;/a&gt;Stetho是Facebook出的一款Android调试工具&lt;/h3&gt;&lt;p&gt;我们可以用它在Chrome DevTools下查看应用的布局、网络请求、Sqlite、SharedPreference并能通过js来调试代码（使用js进行调试的时候FB只做了初步封装，使用起来会比较麻烦，需要自己进一步封装）&lt;/p&gt;
&lt;h3 id=&quot;来点截图（取自官网）&quot;&gt;&lt;a href=&quot;#来点截图（取自官网）&quot; class=&quot;headerlink&quot; title=&quot;来点截图（取自官网）&quot;&gt;&lt;/a&gt;来点截图（取自&lt;a href=&quot;http://facebook.github.io/stetho/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官网&lt;/a&gt;）&lt;/h3&gt;&lt;h4 id=&quot;Chrome-DevTools&quot;&gt;&lt;a href=&quot;#Chrome-DevTools&quot; class=&quot;headerlink&quot; title=&quot;Chrome DevTools&quot;&gt;&lt;/a&gt;Chrome DevTools&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-discovery.png&quot; alt=&quot;Chrome DevTools&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看网络请求&quot;&gt;&lt;a href=&quot;#查看网络请求&quot; class=&quot;headerlink&quot; title=&quot;查看网络请求&quot;&gt;&lt;/a&gt;查看网络请求&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-network.png&quot; alt=&quot;Network Inspection&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;数据库（可读写）&quot;&gt;&lt;a href=&quot;#数据库（可读写）&quot; class=&quot;headerlink&quot; title=&quot;数据库（可读写）&quot;&gt;&lt;/a&gt;数据库（可读写）&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-sqlite.png&quot; alt=&quot;Database Inspection&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看布局（双向查看）&quot;&gt;&lt;a href=&quot;#查看布局（双向查看）&quot; class=&quot;headerlink&quot; title=&quot;查看布局（双向查看）&quot;&gt;&lt;/a&gt;查看布局（双向查看）&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;用鼠标放在Element面板中的xml节点上，会在应用中高亮对应的布局&lt;/li&gt;
&lt;li&gt;点击Element左边的放大镜，然后点击应用中的布局，会自动跳转到Element面板中的xml节点&lt;br&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-elements.png&quot; alt=&quot;View Hierarchy&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;Javascript-Console&quot;&gt;&lt;a href=&quot;#Javascript-Console&quot; class=&quot;headerlink&quot; title=&quot;Javascript Console&quot;&gt;&lt;/a&gt;Javascript Console&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-js.png&quot; alt=&quot;Javascript Console&quot;&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;在代码中配置stetho&quot;&gt;&lt;a href=&quot;#在代码中配置stetho&quot; class=&quot;headerlink&quot; title=&quot;在代码中配置stetho&quot;&gt;&lt;/a&gt;在代码中配置stetho&lt;/h2&gt;&lt;h3 id=&quot;build-gradle&quot;&gt;&lt;a href=&quot;#build-gradle&quot; class=&quot;headerlink&quot; title=&quot;build.gradle&quot;&gt;&lt;/a&gt;build.gradle&lt;/h3&gt;&lt;figure class=&quot;highlight gradle&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;android &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 如果编译的时候出现OutOfMemory，添加以下配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dexOptions &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        incremental &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        javaMaxHeapSize &lt;span class=&quot;string&quot;&gt;&quot;4g&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    buildTypes &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        debug &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// 如果因为加了stetho导致DexIndexOverflowException，需要添加以下配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            multiDexEnabled &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;dependencies&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 只在debug版中加入stetho&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    debugCompile &lt;span class=&quot;string&quot;&gt;&#39;com.facebook.stetho:stetho:1.3.1&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    debugCompile &lt;span class=&quot;string&quot;&gt;&#39;com.facebook.stetho:stetho-js-rhino:1.3.1&#39;&lt;/span&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//debugCompile &#39;com.facebook.stetho:stetho-urlconnection:1.3.1&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 如果因为加了stetho导致DexIndexOverflowException，需要添加以下配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    debugCompile &lt;span class=&quot;string&quot;&gt;&#39;com.android.support:multidex:1.0.1&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;YourApplication-java&quot;&gt;&lt;a href=&quot;#YourApplication-java&quot; class=&quot;headerlink&quot; title=&quot;YourApplication.java&quot;&gt;&lt;/a&gt;YourApplication.java&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 当前界面显示的Activity，供Console调用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Activity mAct = &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 方便从Console中通过变量名获取mAct对象&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Activity &lt;span class=&quot;title&quot;&gt;getmAct&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;  mAct;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 从java代码中获取、设置mAct&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Activity &lt;span class=&quot;title&quot;&gt;getCurrentActivity&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; mAct;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setCurrentActivity&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Activity act)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.mAct = act;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.onCreate();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DebugUtils.init(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;BaseActivity-java&quot;&gt;&lt;a href=&quot;#BaseActivity-java&quot; class=&quot;headerlink&quot; title=&quot;BaseActivity.java&quot;&gt;&lt;/a&gt;BaseActivity.java&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*******************************************************&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * 使用的Activity尽量继承自BaseActivity，以减少配置代码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *******************************************************/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 可以在Console中通过context.mAct.getField()的方式获取私有变量的值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 把获取的逻辑封装到DebugUtils中，以解除不必要的麻烦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Object &lt;span class=&quot;title&quot;&gt;getField&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; DebugUtils.getActField(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;, name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 取消引用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;clearReferences&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    YourApplication app = ((YourApplication)getApplicationContext());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Activity currActivity = app.getCurrentActivity();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.equals(currActivity)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        app.setCurrentActivity(&lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onResume&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ((YourApplication)getApplicationContext()).setCurrentActivity(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onPause&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    clearReferences();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;onDestroy&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    clearReferences();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;DebugUtils-java&quot;&gt;&lt;a href=&quot;#DebugUtils-java&quot; class=&quot;headerlink&quot; title=&quot;DebugUtils.java&quot;&gt;&lt;/a&gt;DebugUtils.java&lt;/h3&gt;&lt;p&gt;因为不想把stetho添加到release中，所以需要通过gradle的buildType特性，对debug版和release版做不同处理&lt;/p&gt;
&lt;h4 id=&quot;debug的配置&quot;&gt;&lt;a href=&quot;#debug的配置&quot; class=&quot;headerlink&quot; title=&quot;debug的配置&quot;&gt;&lt;/a&gt;debug的配置&lt;/h4&gt;&lt;p&gt;在src目录下添加debug/java目录，并在java目录中添加相应的package（比如，DebugUtils将添加到com.yourname.tools.util中，那么就在debug/java目录中新建com.yourname.tools.util包，并在util包下新建DebugUtils.java文件）&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; com.yourname.tools.util;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; android.app.Activity;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; android.content.Context;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; android.support.multidex.MultiDex;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; com.facebook.stetho.Stetho;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.lang.reflect.Field;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Created by Nstd on 2016/3/14.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DebugUtils&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Context context)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 如果因为加了stetho导致DexIndexOverflowException，需要添加以下配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        MultiDex.install(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 以下是Stetho配置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Stetho.initialize(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Stetho.newInitializerBuilder(context)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                .enableDumpapp(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        Stetho.defaultDumperPluginsProvider(context))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                .enableWebKitInspector(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        Stetho.defaultInspectorModulesProvider(context))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                .build());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// 通过反射获取activity中的私有变量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Object &lt;span class=&quot;title&quot;&gt;getActField&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Activity activity, String fieldName)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Field f = activity.getClass().getDeclaredField(fieldName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            f.setAccessible(&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; f.get(activity);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (NoSuchFieldException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            e.printStackTrace();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (IllegalAccessException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            e.printStackTrace();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;release的配置&quot;&gt;&lt;a href=&quot;#release的配置&quot; class=&quot;headerlink&quot; title=&quot;release的配置&quot;&gt;&lt;/a&gt;release的配置&lt;/h4&gt;&lt;p&gt;在src目录下添加release/java目录，并在java目录中添加相应的package（文件名同上，但是里面的函数都是空实现）&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; com.haizitong.minhang.Tool.util;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; android.content.Context;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Created by Nstd on 2016/3/14.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DebugUtils&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context context)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// release version: empty code&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; Object &lt;span class=&quot;title&quot;&gt;getActField&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Activity activity, String fieldName)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//release version: return null&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;其他buildType的配置（参照debug或release）&quot;&gt;&lt;a href=&quot;#其他buildType的配置（参照debug或release）&quot; class=&quot;headerlink&quot; title=&quot;其他buildType的配置（参照debug或release）&quot;&gt;&lt;/a&gt;其他buildType的配置（参照debug或release）&lt;/h4&gt;&lt;h4 id=&quot;PS：网络配置&quot;&gt;&lt;a href=&quot;#PS：网络配置&quot; class=&quot;headerlink&quot; title=&quot;PS：网络配置&quot;&gt;&lt;/a&gt;PS：网络配置&lt;/h4&gt;&lt;p&gt;公司现在用的是HttpUrlConnection，Stetho配置这个的时候侵入性比较强，暂时也用不到，所以不做配置&lt;br&gt;如果需要HttpUrlConnection的配置，可以参看官网Demo的&lt;a href=&quot;https://github.com/facebook/stetho/blob/master/stetho-sample/src/main/java/com/facebook/stetho/sample/Networker.java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;配置&lt;/a&gt;&lt;br&gt;如果用的是okhttp，可以参看官网的这个&lt;a href=&quot;http://facebook.github.io/stetho/#integrations&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;配置&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;编译运行应用&quot;&gt;&lt;a href=&quot;#编译运行应用&quot; class=&quot;headerlink&quot; title=&quot;编译运行应用&quot;&gt;&lt;/a&gt;编译运行应用&lt;/h2&gt;&lt;h2 id=&quot;启动dev控制台&quot;&gt;&lt;a href=&quot;#启动dev控制台&quot; class=&quot;headerlink&quot; title=&quot;启动dev控制台&quot;&gt;&lt;/a&gt;启动dev控制台&lt;/h2&gt;&lt;p&gt;在Chrome的地址栏中输入：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chrome://inspect&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;启动以后，在页面上应该会出现对应的包名、应用名称，选择需要调试的应用，点击 &lt;font style=&quot;color:rgb(0, 194, 255);&quot;&gt;inspect &lt;/font&gt;，开始调试&lt;/p&gt;
&lt;h3 id=&quot;PS：一直加载刷新不出来&quot;&gt;&lt;a href=&quot;#PS：一直加载刷新不出来&quot; class=&quot;headerlink&quot; title=&quot;PS：一直加载刷新不出来&quot;&gt;&lt;/a&gt;PS：一直加载刷新不出来&lt;/h3&gt;&lt;p&gt;如果启动后一直是加载状态，需要使用VPN翻墙，成功加载一次以后就不需要了&lt;/p&gt;
&lt;h2 id=&quot;调试&quot;&gt;&lt;a href=&quot;#调试&quot; class=&quot;headerlink&quot; title=&quot;调试&quot;&gt;&lt;/a&gt;调试&lt;/h2&gt;&lt;h3 id=&quot;Elements面板&quot;&gt;&lt;a href=&quot;#Elements面板&quot; class=&quot;headerlink&quot; title=&quot;Elements面板&quot;&gt;&lt;/a&gt;Elements面板&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;可以查看当前Activity的布局;&lt;/li&gt;
&lt;li&gt;Elements显示的xml中，YourApplication是根节点，直属子节点是对应的Activity，如果跳转到新的Activity，新的Activity会堆叠到旧Activity之上，就像栈一样;&lt;/li&gt;
&lt;li&gt;在Elements的xml节点上移动鼠标，会在手机屏幕上高亮显示对应的区域;&lt;/li&gt;
&lt;li&gt;点击Elements旁边的放大镜（变成蓝色），然后点击屏幕，随后xml会自动定位到你点击的节点;&lt;/li&gt;
&lt;li&gt;在Styles面板中可以看到布局元素的属性值.&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;bug？&lt;br&gt;查看不了Dialog的布局信息&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Resource面板&quot;&gt;&lt;a href=&quot;#Resource面板&quot; class=&quot;headerlink&quot; title=&quot;Resource面板&quot;&gt;&lt;/a&gt;Resource面板&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Web SQL：中可以查看Sqlite的信息&lt;ul&gt;
&lt;li&gt;点击数据库名称，可以输入sql语句直接操作数据库&lt;/li&gt;
&lt;li&gt;点击表名，可以查看该表的所有数据&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Local Storage：中可以查看SharedPreferences的信息&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;Console面板&quot;&gt;&lt;a href=&quot;#Console面板&quot; class=&quot;headerlink&quot; title=&quot;Console面板&quot;&gt;&lt;/a&gt;Console面板&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;context相当于Application对象&lt;/li&gt;
&lt;li&gt;如果加入了之前的封装（DebugUtils等）&lt;ul&gt;
&lt;li&gt;通过context.mAct获得当前windows中的Activity&lt;/li&gt;
&lt;li&gt;通过context.mAct.公有属性名，可以获取mAct中public属性变量的值&lt;/li&gt;
&lt;li&gt;通过context.mAct.getField(fieldName)可以获取到这个Activity中的私有变量值（当然也可以获取public的）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;如果获取的是一个对象，eg：context.mAct.mTvMessage（mTvMessage是个TextView），可能不能直接操作该对象的方法，需要使用importPackage(android.widget)，引入该对象所在的包（将包内的所有java对象引入到jsRuntime中）；或者使用importClass(android.widget.TextView)，只引入TextView对象，此时才能使用context.mAct.mTvMessage.getText()方法&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;PS：其他&quot;&gt;&lt;a href=&quot;#PS：其他&quot; class=&quot;headerlink&quot; title=&quot;PS：其他&quot;&gt;&lt;/a&gt;PS：其他&lt;/h2&gt;&lt;h3 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;- 代码&quot;&gt;&lt;/a&gt;- 代码&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Nstd/AndroidTools&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;前往GitHub&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Android-Studio&quot;&gt;&lt;a href=&quot;#Android-Studio&quot; class=&quot;headerlink&quot; title=&quot;- Android Studio&quot;&gt;&lt;/a&gt;- Android Studio&lt;/h3&gt;&lt;p&gt;如果觉得Android Studio卡，可以尝试修改Studio的配置，增加其使用的内存大小&lt;br&gt;window下：&lt;br&gt;studio安装目录\bin\sudio64.exe.vmoptions:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-Xmx4096m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-XX:MaxPermSize=1024m&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://facebook.github.io/stetho&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官网文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/stetho&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方Github-stetho&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/facebook/stetho/tree/master/stetho-js-rhino&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方Github-stetho-js-rhino&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino/Scripting_Java&quot; title=&quot;Javascript Console中可用的相关知识&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Scripting Java&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是Stetho&quot;&gt;&lt;a href=&quot;#什么是Stetho&quot; class=&quot;headerlink&quot; title=&quot;什么是Stetho&quot;&gt;&lt;/a&gt;什么是Stetho&lt;/h2&gt;&lt;h3 id=&quot;Stetho是Facebook出的一款Android调试工具&quot;&gt;&lt;a href=&quot;#Stetho是Facebook出的一款Android调试工具&quot; class=&quot;headerlink&quot; title=&quot;Stetho是Facebook出的一款Android调试工具&quot;&gt;&lt;/a&gt;Stetho是Facebook出的一款Android调试工具&lt;/h3&gt;&lt;p&gt;我们可以用它在Chrome DevTools下查看应用的布局、网络请求、Sqlite、SharedPreference并能通过js来调试代码（使用js进行调试的时候FB只做了初步封装，使用起来会比较麻烦，需要自己进一步封装）&lt;/p&gt;
&lt;h3 id=&quot;来点截图（取自官网）&quot;&gt;&lt;a href=&quot;#来点截图（取自官网）&quot; class=&quot;headerlink&quot; title=&quot;来点截图（取自官网）&quot;&gt;&lt;/a&gt;来点截图（取自&lt;a href=&quot;http://facebook.github.io/stetho/&quot;&gt;官网&lt;/a&gt;）&lt;/h3&gt;&lt;h4 id=&quot;Chrome-DevTools&quot;&gt;&lt;a href=&quot;#Chrome-DevTools&quot; class=&quot;headerlink&quot; title=&quot;Chrome DevTools&quot;&gt;&lt;/a&gt;Chrome DevTools&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-discovery.png&quot; alt=&quot;Chrome DevTools&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看网络请求&quot;&gt;&lt;a href=&quot;#查看网络请求&quot; class=&quot;headerlink&quot; title=&quot;查看网络请求&quot;&gt;&lt;/a&gt;查看网络请求&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-network.png&quot; alt=&quot;Network Inspection&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;数据库（可读写）&quot;&gt;&lt;a href=&quot;#数据库（可读写）&quot; class=&quot;headerlink&quot; title=&quot;数据库（可读写）&quot;&gt;&lt;/a&gt;数据库（可读写）&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-sqlite.png&quot; alt=&quot;Database Inspection&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看布局（双向查看）&quot;&gt;&lt;a href=&quot;#查看布局（双向查看）&quot; class=&quot;headerlink&quot; title=&quot;查看布局（双向查看）&quot;&gt;&lt;/a&gt;查看布局（双向查看）&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;用鼠标放在Element面板中的xml节点上，会在应用中高亮对应的布局&lt;/li&gt;
&lt;li&gt;点击Element左边的放大镜，然后点击应用中的布局，会自动跳转到Element面板中的xml节点&lt;br&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-elements.png&quot; alt=&quot;View Hierarchy&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;Javascript-Console&quot;&gt;&lt;a href=&quot;#Javascript-Console&quot; class=&quot;headerlink&quot; title=&quot;Javascript Console&quot;&gt;&lt;/a&gt;Javascript Console&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/stetho/static/images/inspector-js.png&quot; alt=&quot;Javascript Console&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="android" scheme="http://blog.aha-nstd.com/categories/android/"/>
    
    
      <category term="配置" scheme="http://blog.aha-nstd.com/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="android" scheme="http://blog.aha-nstd.com/tags/android/"/>
    
      <category term="stetho" scheme="http://blog.aha-nstd.com/tags/stetho/"/>
    
  </entry>
  
  <entry>
    <title>关于学习</title>
    <link href="http://blog.aha-nstd.com/2016/02/14/about-learning/"/>
    <id>http://blog.aha-nstd.com/2016/02/14/about-learning/</id>
    <published>2016-02-14T13:29:53.000Z</published>
    <updated>2016-03-23T02:29:00.817Z</updated>
    
    <content type="html">&lt;h2 id=&quot;What-amp-Why&quot;&gt;&lt;a href=&quot;#What-amp-Why&quot; class=&quot;headerlink&quot; title=&quot;What &amp;amp; Why&quot;&gt;&lt;/a&gt;What &amp;amp; Why&lt;/h2&gt;&lt;p&gt;我们对这个世界的依恋或迷恋，是我们活下去的动力，而这种迷恋或多或少会以不同的方式成瘾，不理解的人唾之恨之，唯独只有自己知道个中缘由，所以我们需要一套坚固的自我价值体系。&lt;br&gt;然而任何体系都不是完善的，假如不辩证地持守自我体系，迟早会把自己逼入钻牛角尖的境地，时常更新完善这个体系，才能让我们更好地面对自己以及他人。为了完善它，放下羞怯、要面子以及其他会阻碍自己获得充实感的心理因素，自觉或者不自觉地去学习、吸收。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Pre-How&quot;&gt;&lt;a href=&quot;#Pre-How&quot; class=&quot;headerlink&quot; title=&quot;Pre-How&quot;&gt;&lt;/a&gt;Pre-How&lt;/h2&gt;&lt;h5 id=&quot;1-健康&quot;&gt;&lt;a href=&quot;#1-健康&quot; class=&quot;headerlink&quot; title=&quot;1. 健康&quot;&gt;&lt;/a&gt;1. 健康&lt;/h5&gt;&lt;p&gt;健康是做任何一样事情的前提，先学会管理自己的健康（身体和精神）&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;适量的运动&lt;/li&gt;
&lt;li&gt;充足的休息（规律作息）&lt;/li&gt;
&lt;li&gt;每天做一件能让自己开心的事（莫当任务做，是为了真正让自己开心起来）&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&quot;2-注意力&quot;&gt;&lt;a href=&quot;#2-注意力&quot; class=&quot;headerlink&quot; title=&quot;2. 注意力&quot;&gt;&lt;/a&gt;2. 注意力&lt;/h5&gt;&lt;p&gt;集中注意力在当前要做的事上，排除干扰（如果出现干扰，可以尝试快速记下再稍后去做）&lt;/p&gt;
&lt;h5 id=&quot;3-甜头&quot;&gt;&lt;a href=&quot;#3-甜头&quot; class=&quot;headerlink&quot; title=&quot;3. 甜头&quot;&gt;&lt;/a&gt;3. 甜头&lt;/h5&gt;&lt;p&gt;不管学习什么都要先成功学会一样东西，这种成功的经验会帮助我们能有更多的信心去成功地学下一样东西&lt;/p&gt;
&lt;h5 id=&quot;4-坚持&quot;&gt;&lt;a href=&quot;#4-坚持&quot; class=&quot;headerlink&quot; title=&quot;4. 坚持&quot;&gt;&lt;/a&gt;4. 坚持&lt;/h5&gt;&lt;p&gt;如果不能自发地坚持，不用再往下看了。。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;What-amp-Why&quot;&gt;&lt;a href=&quot;#What-amp-Why&quot; class=&quot;headerlink&quot; title=&quot;What &amp;amp; Why&quot;&gt;&lt;/a&gt;What &amp;amp; Why&lt;/h2&gt;&lt;p&gt;我们对这个世界的依恋或迷恋，是我们活下去的动力，而这种迷恋或多或少会以不同的方式成瘾，不理解的人唾之恨之，唯独只有自己知道个中缘由，所以我们需要一套坚固的自我价值体系。&lt;br&gt;然而任何体系都不是完善的，假如不辩证地持守自我体系，迟早会把自己逼入钻牛角尖的境地，时常更新完善这个体系，才能让我们更好地面对自己以及他人。为了完善它，放下羞怯、要面子以及其他会阻碍自己获得充实感的心理因素，自觉或者不自觉地去学习、吸收。&lt;br&gt;
    
    </summary>
    
      <category term="随笔" scheme="http://blog.aha-nstd.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="学习" scheme="http://blog.aha-nstd.com/tags/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="随笔" scheme="http://blog.aha-nstd.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>CSS布局之postion、float、z-index</title>
    <link href="http://blog.aha-nstd.com/2016/01/30/CSS-layout-postion-float-z-index/"/>
    <id>http://blog.aha-nstd.com/2016/01/30/CSS-layout-postion-float-z-index/</id>
    <published>2016-01-30T08:48:50.000Z</published>
    <updated>2016-03-23T02:29:00.815Z</updated>
    
    <content type="html">&lt;h2 id=&quot;position（属性）&quot;&gt;&lt;a href=&quot;#position（属性）&quot; class=&quot;headerlink&quot; title=&quot;position（属性）&quot;&gt;&lt;/a&gt;position（属性）&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;static&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;如果没有指定position，浏览器默认position为static，元素处于文档流中，浏览器根据标签来识别到底是块元素还是行内元素。指定的top、right、bottom、left、z-index皆无效，文档流后面的节点会遮盖前面的节点。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;fixed&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;固定位置，根据TRBL确定位置，可以实现类似常驻侧边栏或者固定header、footer的效果。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;relative&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;相对于原有位置，根据TRBL进行偏移（原有位置所在空间仍会保留）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;absolute&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;相对于position为非static属性的祖先节点，进行偏移，如果祖先中没有非static节点，则相对于body进行偏移。 absolute与relative的区别在于：&lt;br&gt;a) absolute元素的原点（top、left）在非static祖先节点的原点上&lt;br&gt;b) relative元素的原点（top、left）是在自己没有设置position: relative;（其实就是自己为static）时的原点上&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;inherit&lt;/strong&gt;&lt;br&gt;继承父节点的position（实际的position布局方式只有四种：static、fixed、relative、absolute）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;float（常见问题）&quot;&gt;&lt;a href=&quot;#float（常见问题）&quot; class=&quot;headerlink&quot; title=&quot;float（常见问题）&quot;&gt;&lt;/a&gt;float（常见问题）&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;浮动标签没有被父标签包裹&lt;/strong&gt;&lt;br&gt;在父标签中设置overflow: auto; （IE6中还需要在父标签中设置zoom: 1;）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;清除浮动&lt;/strong&gt;&lt;br&gt;在需要清除浮动的标签上使用css的clear属性（left、right、both）&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;z-index&quot;&gt;&lt;a href=&quot;#z-index&quot; class=&quot;headerlink&quot; title=&quot;z-index&quot;&gt;&lt;/a&gt;z-index&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;非static元素会覆盖在static元素之上&lt;/li&gt;
&lt;li&gt;z-index只对非static元素有效&lt;/li&gt;
&lt;li&gt;如果没有指定z-index，按节点出现顺序，后面的节点会覆盖在前面的节点之上&lt;/li&gt;
&lt;li&gt;同级元素，设置的z-index值越大越在上面（z-index&amp;gt;=0的元素，在没设z-index的元素之上；z-index&amp;lt;0的元素，在没设z-index元素之下）&lt;/li&gt;
&lt;li&gt;优先响应同级父元素的z-index值，子元素的z-index值比较只在父元素内有效&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://zh.learnlayout.com/position.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;position &amp;amp; float&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.neoease.com/css-z-index-property-and-layering-tree/comment-page-1/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;z-index&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;position（属性）&quot;&gt;&lt;a href=&quot;#position（属性）&quot; class=&quot;headerlink&quot; title=&quot;position（属性）&quot;&gt;&lt;/a&gt;position（属性）&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;static&lt;/em&gt;&lt;/strong&gt;&lt;br&gt;如果没有指定position，浏览器默认position为static，元素处于文档流中，浏览器根据标签来识别到底是块元素还是行内元素。指定的top、right、bottom、left、z-index皆无效，文档流后面的节点会遮盖前面的节点。&lt;/p&gt;
    
    </summary>
    
      <category term="web" scheme="http://blog.aha-nstd.com/categories/web/"/>
    
    
      <category term="css" scheme="http://blog.aha-nstd.com/tags/css/"/>
    
      <category term="position" scheme="http://blog.aha-nstd.com/tags/position/"/>
    
      <category term="float" scheme="http://blog.aha-nstd.com/tags/float/"/>
    
      <category term="z-index" scheme="http://blog.aha-nstd.com/tags/z-index/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://blog.aha-nstd.com/2016/01/30/hello-world/"/>
    <id>http://blog.aha-nstd.com/2016/01/30/hello-world/</id>
    <published>2016-01-30T08:48:00.000Z</published>
    <updated>2016-03-23T02:29:00.818Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;http://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;http://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;http://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;http://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;http://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;http://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;http://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;http://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;http://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;http://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;br&gt;
    
    </summary>
    
      <category term="test" scheme="http://blog.aha-nstd.com/categories/test/"/>
    
    
      <category term="test" scheme="http://blog.aha-nstd.com/tags/test/"/>
    
  </entry>
  
</feed>
